<!DOCTYPE html><html lang="en"><head>
<title>CSS4J DOM benchmarks</title>
<link href="basic-c.css" rel="stylesheet" type="text/css" />
<script src="js/indexbuilder-compr.js" type="text/javascript" charset="utf-8"></script>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body id="dom-mark">
<div class="layout">
<div id="hdr01"></div>
<a id="mylinkhome" href="/"><span>CSS4J</span></a>
</div>
<div class="container">
<div class="menu">
<ul class="menulist">
<li><a id="mnuindice" href="/"><span>Home</span></a></li>
<li><a id="mnuusage" href="usage.html"><span>Usage</span></a></li>
<li><a id="mnuapi2" href="api/latest/"><span>Latest API</span></a></li>
<li><a id="mnufaq" href="faq.html"><span>FAQ</span></a></li>
<li><a id="mnubenchmarks" href="benchmarks.html"><span>Benchmarks</span></a></li>
<li class="menulvl2"><div id="mnudommark-sel"><span>DOM mark</span></div></li>
<li class="menulvl2"><a id="mnusacmark" href="sac-mark.html"><span>SAC mark</span></a></li>
<li><a id="mnugithub" href="https://github.com/css4j"><span>Github</span></a></li>
</ul>
</div>
<div class="beforemain"></div>
<div class="main">
<div id="presentacion_top" class="textheader"><span>DOM mark</span></div>
<div class="cos">
<h1>DOM benchmarks</h1>
<div class="tema" id="overview">
<h2>Overview</h2>
<p>The DOM benchmarks measure how fast different DOM implementations are when building and traversing documents:</p>
<ul>
<li><a href="https://github.com/css4j/css4j-dom4j">Css4j-DOM4J</a> module (which subclasses DOM4J).</li>
<li><a href="https://css4j.github.io/api/latest/io.sf.carte.css4j/io/sf/carte/doc/dom/package-summary.html">Css4j's native DOM</a>.</li>
<li>Stand-alone <a href="https://dom4j.github.io/">DOM4J</a>.</li>
<li>JDK's bundled <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.xml/org/w3c/dom/DOMImplementation.html">DOM implementation</a>.</li>
</ul>
<p>As a reference, some of the benchmarks were performed with <a href="https://jsoup.org/">Jsoup</a> which
does not implement DOM but is a popular HTML parser and pseudo-DOM library. It is only being benchmarked when the document's markup is (X)HTML.</p>
<div class="subtema">
<p>The following software versions were used:</p>
<ul>
<li>Java: <a href="https://adoptopenjdk.net/">AdoptOpenJDK</a>* 15.</li>
<li>JMH: 1.26.</li>
<li>css4j: 3.2.</li>
<li>validator.nu htmlparser: <a href="https://search.maven.org/artifact/nu.validator/htmlparser">1.4.16</a>.</li>
<li>dom4j: 2.1.3.</li>
<li>Jsoup: 1.13.1.</li>
</ul>
</div>
<p>The tables and charts were generated by <a href="https://github.com/css4j/carte">Carte</a> (look for the <code>BenchmarkChartWriter</code>
class and the <code>examples</code> folder in the <code>carte-jmh</code> module). The grey lines at the top of the bars give the amplitude of the estimated error.</p>
<p>The computer has an Intel® Core™ i5-1035G7 CPU and 8GB of RAM. Unfortunately, being a laptop processor it is affected by thermal management,
which may explain some relatively large error intervals.</p>
<p class="note">(*) Note: one of the tested DOM implementations is the one that comes bundled with the JDK (identified as "JDK" in the graphics), and it has been observed
that the version shipped with the Oracle JDK may be faster.</p>
</div>
<div class="tema" id="html-build">
<h2>Build HTML documents</h2>
<p>Measures the speed at which the <a href="https://about.validator.nu/htmlparser/">validator.nu HTML parser</a> can parse a small document (38 KB HTML) into a few DOM implementations.
As a reference, they are compared to the same document parsed by Jsoup.</p>
<svg version="1.1" baseprofile="full" xmlns="http://www.w3.org/2000/svg" width="700" height="500" viewbox="0 0 700 500" class="carteitem">
<title>HTML build benchmark</title><defs>
<clipPath id="html-build-cut-scale-shadow">
  <rect width="623" height="15" x="71" y="41"/>
  <rect width="8" height="418" x="685" y="37"/>
</clipPath>
<linearGradient id="html-build-background" gradientunits="objectBoundingBox" x1="1" x2="1" y1="0" y2="1">
<stop stop-color="#cde1ff" offset="0"/>
<stop stop-color="#ffffff" offset="0.9"/>
</linearGradient>
<linearGradient id="html-build-reflection" gradientunits="objectBoundingBox" x1="0" x2="0" y1="0" y2="1">
<stop stop-color="#eeeeee" offset="0" stop-opacity="0.4"/>
<stop stop-color="#ffffff" offset="0.75" stop-opacity="0"/>
</linearGradient>
<filter id="html-build-projection" filterunits="objectBoundingBox" x="0" y="-0.1" width="1.2" height="1.2">
<feGaussianBlur in="SourceAlpha" stddeviation="2" result="alpha_blur"/>
<feOffset in="alpha_blur" dx="3" dy="-3" result="offset_alpha_blur"/>
</filter>
</defs>
<style>text {
    font-family: "Open Sans", Verdana, sans-serif;
}
#html-build-caption {
    font-size: 13pt;
    font-weight: 700;
}
#html-build-subcaption {
    font-size: 9pt;
    font-weight: 600;
}
#html-build-x-title,#html-build-y-title {
    font-size: 10pt;
    font-weight: 700;
}
.html-build-itemlabel {
    font-size: 9pt;
    font-weight: 400;
}
.html-build-scaleItem {
    font-size: 9pt;
    font-weight: 300;
}
</style>
<rect width="100%" height="100%" fill="url('#html-build-background')"/>
<rect width="610" height="400" x="75" y="55" stroke="#000000" fill="rgb(0,0,0)" fill-opacity="0" filter="url('#html-build-projection')" clip-path="url('#html-build-cut-scale-shadow')"/>
<rect id="html-build-chartbox" width="610" height="400" x="75" y="55" stroke-width="1" stroke="#000000" fill="rgb(0,0,0)" fill-opacity="0"/>
<text id="html-build-caption" x="355" y="22" text-anchor="middle" fill="black">HTML build benchmark</text>
<text id="html-build-subcaption" x="355" y="40" text-anchor="middle" fill="black">38 KB html file, validator.nu parser (except Jsoup)</text>
<rect width="88.0" height="32.9" x="80.5" y="422.1" stroke="#ffffff" stroke-opacity="0.4" filter="url('#html-build-projection')"/>
<rect id="html-build-markBuildCss4jDOM4J" width="88.0" height="32.9" x="80.5" y="422.1" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#c04d4d"/>
<rect width="88.0" height="32.9" x="80.5" y="422.1" fill="url('#html-build-reflection')"/>
<line x1="129.3" x2="129.3" y1="420.9" y2="423.1" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="126.7" y="470" class="itemlabel" text-anchor="middle" fill="black">Css4j-DOM4J</text>
<rect width="88.0" height="31.4" x="182.1" y="423.6" stroke="#ffffff" stroke-opacity="0.4" filter="url('#html-build-projection')"/>
<rect id="html-build-markBuildDOM" width="88.0" height="31.4" x="182.1" y="423.6" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#61c061"/>
<rect width="88.0" height="31.4" x="182.1" y="423.6" fill="url('#html-build-reflection')"/>
<line x1="230.9" x2="230.9" y1="423.8" y2="424.2" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="228.4" y="470" class="itemlabel" text-anchor="middle" fill="black">Css4j DOM</text>
<rect width="88.0" height="31.6" x="283.8" y="423.4" stroke="#ffffff" stroke-opacity="0.4" filter="url('#html-build-projection')"/>
<rect id="html-build-markBuildDOM4J" width="88.0" height="31.6" x="283.8" y="423.4" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#4d4dc0"/>
<rect width="88.0" height="31.6" x="283.8" y="423.4" fill="url('#html-build-reflection')"/>
<line x1="332.6" x2="332.6" y1="422.8" y2="423.2" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="330.1" y="470" class="itemlabel" text-anchor="middle" fill="black">DOM4J</text>
<rect width="88.0" height="30.7" x="385.5" y="424.3" stroke="#ffffff" stroke-opacity="0.4" filter="url('#html-build-projection')"/>
<rect id="html-build-markBuildDOMXHTMLBuilder" width="88.0" height="30.7" x="385.5" y="424.3" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#c04dc0"/>
<rect width="88.0" height="30.7" x="385.5" y="424.3" fill="url('#html-build-reflection')"/>
<line x1="434.3" x2="434.3" y1="423.8" y2="424.2" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="431.7" y="470" class="itemlabel" text-anchor="middle" fill="black">
				<tspan x="431.7">Css4j DOM</tspan> <tspan style="font-size: smaller; " x="431.7" dy="14.4">(own builder)</tspan>
			</text>
<rect width="88.0" height="383" x="487.1" y="72" stroke="#ffffff" stroke-opacity="0.4" filter="url('#html-build-projection')"/>
<rect id="html-build-markBuildJsoup" width="88.0" height="383" x="487.1" y="72" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#b0d0d0"/>
<rect width="88.0" height="383" x="487.1" y="72" fill="url('#html-build-reflection')"/>
<line x1="535.9" x2="535.9" y1="67.4" y2="76.6" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="533.4" y="470" class="itemlabel" text-anchor="middle" fill="black">Jsoup</text>
<rect width="88.0" height="36.1" x="588.8" y="418.9" stroke="#ffffff" stroke-opacity="0.4" filter="url('#html-build-projection')"/>
<rect id="html-build-markBuildPlainJDK" width="88.0" height="36.1" x="588.8" y="418.9" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#c0c061"/>
<rect width="88.0" height="36.1" x="588.8" y="418.9" fill="url('#html-build-reflection')"/>
<line x1="637.6" x2="637.6" y1="418.8" y2="419.2" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="635.1" y="470" class="itemlabel" text-anchor="middle" fill="black">JDK</text>
<text x="74" y="59" class="scaleitem" text-anchor="end">4100</text>
<text x="74" y="139" class="scaleitem" text-anchor="end">3280</text>
<text x="74" y="219" class="scaleitem" text-anchor="end">2460</text>
<text x="74" y="299" class="scaleitem" text-anchor="end">1640</text>
<text x="74" y="379" class="scaleitem" text-anchor="end">820</text>
<text x="74" y="459" class="scaleitem" text-anchor="end">0</text>
<text id="html-build-y-title" x="16" y="260" text-anchor="middle" fill="black" transform="rotate(270,16,260)">Throughput (ops/s)</text>
<text id="html-build-x-title" x="350" y="496" text-anchor="middle" fill="black">DOM Implementation</text>
<image src="benchmark/html-build.png" xlink:href=""/></svg>
<p>Numeric results (higher is better):</p>
<table class="normaltbl carteitem">
<thead><tr><th>Implementation</th><th>Score</th><th>Error</th><th>Unit</th></tr></thead><tbody>
<tr><td>Css4j-DOM4J</td><td class="number">340.34</td><td class="number">±11.21</td><td>ops/s</td></tr>
<tr><td>Css4j DOM</td><td class="number">324.86</td><td class="number">±2.16</td><td>ops/s</td></tr>
<tr><td>DOM4J</td><td class="number">327.60</td><td class="number">±2.21</td><td>ops/s</td></tr>
<tr><td>Css4j DOM (own builder)</td><td class="number">318.08</td><td class="number">±2.01</td><td>ops/s</td></tr>
<tr><td>Jsoup</td><td class="number">3,965.42</td><td class="number">±47.87</td><td>ops/s</td></tr>
<tr><td>JDK</td><td class="number">373.52</td><td class="number">±2.22</td><td>ops/s</td></tr>
</tbody></table>
<p>The standard DOM implementations are somewhat even in this test but Jsoup is much faster, about ten times the JDK and 12
times the speed of the others.</p>
</div>
<div class="tema" id="xml-build-small">
<h2>Build small XML documents</h2>
<p>The SAX parser that comes bundled with the JDK is used to parse and build a document from a small XHTML file (38 KB).</p>
<svg version="1.1" baseprofile="full" xmlns="http://www.w3.org/2000/svg" width="700" height="500" viewbox="0 0 700 500" class="carteitem">
<title>XML build benchmark</title><defs>
<clipPath id="xml-build-small-cut-scale-shadow">
  <rect width="623" height="15" x="71" y="41"/>
  <rect width="8" height="418" x="685" y="37"/>
</clipPath>
<linearGradient id="xml-build-small-background" gradientunits="objectBoundingBox" x1="1" x2="1" y1="0" y2="1">
<stop stop-color="#cde1ff" offset="0"/>
<stop stop-color="#ffffff" offset="0.9"/>
</linearGradient>
<linearGradient id="xml-build-small-reflection" gradientunits="objectBoundingBox" x1="0" x2="0" y1="0" y2="1">
<stop stop-color="#eeeeee" offset="0" stop-opacity="0.4"/>
<stop stop-color="#ffffff" offset="0.75" stop-opacity="0"/>
</linearGradient>
<filter id="xml-build-small-projection" filterunits="objectBoundingBox" x="0" y="-0.1" width="1.2" height="1.2">
<feGaussianBlur in="SourceAlpha" stddeviation="2" result="alpha_blur"/>
<feOffset in="alpha_blur" dx="3" dy="-3" result="offset_alpha_blur"/>
</filter>
</defs>
<style>text {
    font-family: "Open Sans", Verdana, sans-serif;
}
#xml-build-small-caption {
    font-size: 13pt;
    font-weight: 700;
}
#xml-build-small-subcaption {
    font-size: 9pt;
    font-weight: 600;
}
#xml-build-small-x-title,#xml-build-small-y-title {
    font-size: 10pt;
    font-weight: 700;
}
.xml-build-small-itemlabel {
    font-size: 9pt;
    font-weight: 400;
}
.xml-build-small-scaleItem {
    font-size: 9pt;
    font-weight: 300;
}
</style>
<rect width="100%" height="100%" fill="url('#xml-build-small-background')"/>
<rect width="610" height="400" x="75" y="55" stroke="#000000" fill="rgb(0,0,0)" fill-opacity="0" filter="url('#xml-build-small-projection')" clip-path="url('#xml-build-small-cut-scale-shadow')"/>
<rect id="xml-build-small-chartbox" width="610" height="400" x="75" y="55" stroke-width="1" stroke="#000000" fill="rgb(0,0,0)" fill-opacity="0"/>
<text id="xml-build-small-caption" x="355" y="22" text-anchor="middle" fill="black">XML build benchmark</text>
<text id="xml-build-small-subcaption" x="355" y="40" text-anchor="middle" fill="black">38kB file</text>
<rect width="108.0" height="355.6" x="80.6" y="99.4" stroke="#ffffff" stroke-opacity="0.4" filter="url('#xml-build-small-projection')"/>
<rect id="xml-build-small-markBuildCss4jDOM4J" width="108.0" height="355.6" x="80.6" y="99.4" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#c04d4d"/>
<rect width="108.0" height="355.6" x="80.6" y="99.4" fill="url('#xml-build-small-reflection')"/>
<line x1="139.2" x2="139.2" y1="85.5" y2="112.5" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="136.1" y="470" class="itemlabel" text-anchor="middle" fill="black">Css4j-DOM4J</text>
<rect width="108.0" height="362" x="202.6" y="93" stroke="#ffffff" stroke-opacity="0.4" filter="url('#xml-build-small-projection')"/>
<rect id="xml-build-small-markBuildDOM" width="108.0" height="362" x="202.6" y="93" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#61c061"/>
<rect width="108.0" height="362" x="202.6" y="93" fill="url('#xml-build-small-reflection')"/>
<line x1="261.2" x2="261.2" y1="90.6" y2="95.4" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="258.1" y="470" class="itemlabel" text-anchor="middle" fill="black">Css4j DOM</text>
<rect width="108.0" height="379.2" x="324.6" y="75.8" stroke="#ffffff" stroke-opacity="0.4" filter="url('#xml-build-small-projection')"/>
<rect id="xml-build-small-markBuildDOM4J" width="108.0" height="379.2" x="324.6" y="75.8" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#4d4dc0"/>
<rect width="108.0" height="379.2" x="324.6" y="75.8" fill="url('#xml-build-small-reflection')"/>
<line x1="383.2" x2="383.2" y1="64.4" y2="87.6" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="380.1" y="470" class="itemlabel" text-anchor="middle" fill="black">DOM4J</text>
<rect width="108.0" height="344.4" x="446.6" y="110.6" stroke="#ffffff" stroke-opacity="0.4" filter="url('#xml-build-small-projection')"/>
<rect id="xml-build-small-markBuildJdk" width="108.0" height="344.4" x="446.6" y="110.6" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#c04dc0"/>
<rect width="108.0" height="344.4" x="446.6" y="110.6" fill="url('#xml-build-small-reflection')"/>
<line x1="505.2" x2="505.2" y1="108.1" y2="113.9" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="502.1" y="470" class="itemlabel" text-anchor="middle" fill="black">
			<tspan x="502.1">JDK</tspan> <tspan style="font-size: smaller; " x="502.1" dy="14.4">(css4j builder)</tspan>
		</text>
<rect width="108.0" height="362.9" x="568.6" y="92.1" stroke="#ffffff" stroke-opacity="0.4" filter="url('#xml-build-small-projection')"/>
<rect id="xml-build-small-markBuildPlainJdk" width="108.0" height="362.9" x="568.6" y="92.1" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#c0c061"/>
<rect width="108.0" height="362.9" x="568.6" y="92.1" fill="url('#xml-build-small-reflection')"/>
<line x1="627.2" x2="627.2" y1="90.2" y2="93.8" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="624.1" y="470" class="itemlabel" text-anchor="middle" fill="black">JDK</text>
<text x="74" y="59" class="scaleitem" text-anchor="end">550</text>
<text x="74" y="139" class="scaleitem" text-anchor="end">440</text>
<text x="74" y="219" class="scaleitem" text-anchor="end">330</text>
<text x="74" y="299" class="scaleitem" text-anchor="end">220</text>
<text x="74" y="379" class="scaleitem" text-anchor="end">110</text>
<text x="74" y="459" class="scaleitem" text-anchor="end">0</text>
<text id="xml-build-small-y-title" x="16" y="260" text-anchor="middle" fill="black" transform="rotate(270,16,260)">Throughput (ops/s)</text>
<text id="xml-build-small-x-title" x="350" y="496" text-anchor="middle" fill="black">DOM Implementation</text>
<image src="benchmark/xml-build-small.png" xlink:href=""/></svg>
<p>Numeric results (higher is better):</p>
<table class="normaltbl carteitem">
<thead><tr><th>Implementation</th><th>Score</th><th>Error</th><th>Unit</th></tr></thead><tbody>
<tr><td>Css4j-DOM4J</td><td class="number">493.95</td><td class="number">±18.75</td><td>ops/s</td></tr>
<tr><td>Css4j DOM</td><td class="number">502.77</td><td class="number">±3.36</td><td>ops/s</td></tr>
<tr><td>DOM4J</td><td class="number">526.70</td><td class="number">±16.10</td><td>ops/s</td></tr>
<tr><td>JDK (css4j builder)</td><td class="number">478.38</td><td class="number">±4.05</td><td>ops/s</td></tr>
<tr><td>JDK</td><td class="number">504.02</td><td class="number">±2.49</td><td>ops/s</td></tr>
</tbody></table>
</div>
<div class="tema" id="xml-build">
<h2>Build XML documents</h2>
<p>The SAX parser that comes bundled with the JDK is used to parse and build a document (1MB file).</p>
<svg version="1.1" baseprofile="full" xmlns="http://www.w3.org/2000/svg" width="700" height="500" viewbox="0 0 700 500" class="carteitem">
<title>XML build benchmark</title><defs>
<clipPath id="xml-build-cut-scale-shadow">
  <rect width="623" height="15" x="71" y="41"/>
  <rect width="8" height="418" x="685" y="37"/>
</clipPath>
<linearGradient id="xml-build-background" gradientunits="objectBoundingBox" x1="1" x2="1" y1="0" y2="1">
<stop stop-color="#cde1ff" offset="0"/>
<stop stop-color="#ffffff" offset="0.9"/>
</linearGradient>
<linearGradient id="xml-build-reflection" gradientunits="objectBoundingBox" x1="0" x2="0" y1="0" y2="1">
<stop stop-color="#eeeeee" offset="0" stop-opacity="0.4"/>
<stop stop-color="#ffffff" offset="0.75" stop-opacity="0"/>
</linearGradient>
<filter id="xml-build-projection" filterunits="objectBoundingBox" x="0" y="-0.1" width="1.2" height="1.2">
<feGaussianBlur in="SourceAlpha" stddeviation="2" result="alpha_blur"/>
<feOffset in="alpha_blur" dx="3" dy="-3" result="offset_alpha_blur"/>
</filter>
</defs>
<style>text {
    font-family: "Open Sans", Verdana, sans-serif;
}
#xml-build-caption {
    font-size: 13pt;
    font-weight: 700;
}
#xml-build-subcaption {
    font-size: 9pt;
    font-weight: 600;
}
#xml-build-x-title,#xml-build-y-title {
    font-size: 10pt;
    font-weight: 700;
}
.xml-build-itemlabel {
    font-size: 9pt;
    font-weight: 400;
}
.xml-build-scaleItem {
    font-size: 9pt;
    font-weight: 300;
}
</style>
<rect width="100%" height="100%" fill="url('#xml-build-background')"/>
<rect width="610" height="400" x="75" y="55" stroke="#000000" fill="rgb(0,0,0)" fill-opacity="0" filter="url('#xml-build-projection')" clip-path="url('#xml-build-cut-scale-shadow')"/>
<rect id="xml-build-chartbox" width="610" height="400" x="75" y="55" stroke-width="1" stroke="#000000" fill="rgb(0,0,0)" fill-opacity="0"/>
<text id="xml-build-caption" x="355" y="22" text-anchor="middle" fill="black">XML build benchmark</text>
<text id="xml-build-subcaption" x="355" y="40" text-anchor="middle" fill="black">1MB file</text>
<rect width="108.0" height="348.3" x="80.6" y="106.7" stroke="#ffffff" stroke-opacity="0.4" filter="url('#xml-build-projection')"/>
<rect id="xml-build-markBuildCss4jDOM4J" width="108.0" height="348.3" x="80.6" y="106.7" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#c04d4d"/>
<rect width="108.0" height="348.3" x="80.6" y="106.7" fill="url('#xml-build-reflection')"/>
<line x1="139.2" x2="139.2" y1="89.4" y2="124.6" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="136.1" y="470" class="itemlabel" text-anchor="middle" fill="black">Css4j-DOM4J</text>
<rect width="108.0" height="325.6" x="202.6" y="129.4" stroke="#ffffff" stroke-opacity="0.4" filter="url('#xml-build-projection')"/>
<rect id="xml-build-markBuildDOM" width="108.0" height="325.6" x="202.6" y="129.4" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#61c061"/>
<rect width="108.0" height="325.6" x="202.6" y="129.4" fill="url('#xml-build-reflection')"/>
<line x1="261.2" x2="261.2" y1="126" y2="132" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="258.1" y="470" class="itemlabel" text-anchor="middle" fill="black">Css4j DOM</text>
<rect width="108.0" height="368.9" x="324.6" y="86.1" stroke="#ffffff" stroke-opacity="0.4" filter="url('#xml-build-projection')"/>
<rect id="xml-build-markBuildDOM4J" width="108.0" height="368.9" x="324.6" y="86.1" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#4d4dc0"/>
<rect width="108.0" height="368.9" x="324.6" y="86.1" fill="url('#xml-build-reflection')"/>
<line x1="383.2" x2="383.2" y1="65.3" y2="106.7" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="380.1" y="470" class="itemlabel" text-anchor="middle" fill="black">DOM4J</text>
<rect width="108.0" height="265.3" x="446.6" y="189.7" stroke="#ffffff" stroke-opacity="0.4" filter="url('#xml-build-projection')"/>
<rect id="xml-build-markBuildJdk" width="108.0" height="265.3" x="446.6" y="189.7" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#c04dc0"/>
<rect width="108.0" height="265.3" x="446.6" y="189.7" fill="url('#xml-build-reflection')"/>
<line x1="505.2" x2="505.2" y1="185.4" y2="194.6" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="502.1" y="470" class="itemlabel" text-anchor="middle" fill="black">
			<tspan x="502.1">JDK</tspan> <tspan style="font-size: smaller; " x="502.1" dy="14.4">(css4j builder)</tspan>
		</text>
<rect width="108.0" height="357.7" x="568.6" y="97.3" stroke="#ffffff" stroke-opacity="0.4" filter="url('#xml-build-projection')"/>
<rect id="xml-build-markBuildPlainJdk" width="108.0" height="357.7" x="568.6" y="97.3" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#c0c061"/>
<rect width="108.0" height="357.7" x="568.6" y="97.3" fill="url('#xml-build-reflection')"/>
<line x1="627.2" x2="627.2" y1="92.2" y2="101.8" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="624.1" y="470" class="itemlabel" text-anchor="middle" fill="black">JDK</text>
<text x="74" y="59" class="scaleitem" text-anchor="end">111</text>
<text x="74" y="139" class="scaleitem" text-anchor="end">89</text>
<text x="74" y="219" class="scaleitem" text-anchor="end">67</text>
<text x="74" y="299" class="scaleitem" text-anchor="end">44</text>
<text x="74" y="379" class="scaleitem" text-anchor="end">22</text>
<text x="74" y="459" class="scaleitem" text-anchor="end">0</text>
<text id="xml-build-y-title" x="16" y="260" text-anchor="middle" fill="black" transform="rotate(270,16,260)">Throughput (ops/s)</text>
<text id="xml-build-x-title" x="350" y="496" text-anchor="middle" fill="black">DOM Implementation</text>
<image src="benchmark/xml-build.png" xlink:href=""/></svg>
<p>Numeric results (higher is better):</p>
<table class="normaltbl carteitem">
<thead><tr><th>Implementation</th><th>Score</th><th>Error</th><th>Unit</th></tr></thead><tbody>
<tr><td>Css4j-DOM4J</td><td class="number">97.624</td><td class="number">±4.932</td><td>ops/s</td></tr>
<tr><td>Css4j DOM</td><td class="number">91.260</td><td class="number">±0.833</td><td>ops/s</td></tr>
<tr><td>DOM4J</td><td class="number">103.412</td><td class="number">±5.790</td><td>ops/s</td></tr>
<tr><td>JDK (css4j builder)</td><td class="number">74.366</td><td class="number">±1.288</td><td>ops/s</td></tr>
<tr><td>JDK</td><td class="number">100.270</td><td class="number">±1.335</td><td>ops/s</td></tr>
</tbody></table>
</div>
<div class="tema" id="traversal-next">
<h2>DOM traversal: <code>getFirstChild()/getNextSibling()</code></h2>
<p>Count the nodes of an XML document, using a combination of <code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.xml/org/w3c/dom/Node.html#getFirstChild()">getFirstChild()</a>/<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.xml/org/w3c/dom/Node.html#getNextSibling()">getNextSibling()</a></code> to traverse it.</p>
<svg version="1.1" baseprofile="full" xmlns="http://www.w3.org/2000/svg" width="700" height="500" viewbox="0 0 700 500" class="carteitem">
<title>DOM Traversal: NextSibling</title><defs>
<clipPath id="traversal-next-cut-scale-shadow">
  <rect width="623" height="15" x="71" y="41"/>
  <rect width="8" height="418" x="685" y="37"/>
</clipPath>
<linearGradient id="traversal-next-background" gradientunits="objectBoundingBox" x1="1" x2="1" y1="0" y2="1">
<stop stop-color="#cde1ff" offset="0"/>
<stop stop-color="#ffffff" offset="0.9"/>
</linearGradient>
<linearGradient id="traversal-next-reflection" gradientunits="objectBoundingBox" x1="0" x2="0" y1="0" y2="1">
<stop stop-color="#eeeeee" offset="0" stop-opacity="0.4"/>
<stop stop-color="#ffffff" offset="0.75" stop-opacity="0"/>
</linearGradient>
<filter id="traversal-next-projection" filterunits="objectBoundingBox" x="0" y="-0.1" width="1.2" height="1.2">
<feGaussianBlur in="SourceAlpha" stddeviation="2" result="alpha_blur"/>
<feOffset in="alpha_blur" dx="3" dy="-3" result="offset_alpha_blur"/>
</filter>
</defs>
<style>text {
    font-family: "Open Sans", Verdana, sans-serif;
}
#traversal-next-caption {
    font-size: 13pt;
    font-weight: 700;
}
#traversal-next-subcaption {
    font-size: 9pt;
    font-weight: 600;
}
#traversal-next-x-title,#traversal-next-y-title {
    font-size: 10pt;
    font-weight: 700;
}
.traversal-next-itemlabel {
    font-size: 9pt;
    font-weight: 400;
}
.traversal-next-scaleItem {
    font-size: 9pt;
    font-weight: 300;
}
</style>
<rect width="100%" height="100%" fill="url('#traversal-next-background')"/>
<rect width="610" height="400" x="75" y="55" stroke="#000000" fill="rgb(0,0,0)" fill-opacity="0" filter="url('#traversal-next-projection')" clip-path="url('#traversal-next-cut-scale-shadow')"/>
<rect id="traversal-next-chartbox" width="610" height="400" x="75" y="55" stroke-width="1" stroke="#000000" fill="rgb(0,0,0)" fill-opacity="0"/>
<text id="traversal-next-caption" x="355" y="22" text-anchor="middle" fill="black">DOM Traversal: NextSibling</text>
<text id="traversal-next-subcaption" x="355" y="40" text-anchor="middle" fill="black">1MB file traversed by getFirstChild()/getNextSibling()</text>
<rect width="187.0" height="186.7" x="81.5" y="268.3" stroke="#ffffff" stroke-opacity="0.4" filter="url('#traversal-next-projection')"/>
<rect id="traversal-next-markTraverseDOM" width="187.0" height="186.7" x="81.5" y="268.3" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#61c061"/>
<rect width="187.0" height="186.7" x="81.5" y="268.3" fill="url('#traversal-next-reflection')"/>
<line x1="179.1" x2="179.1" y1="255.9" y2="280.1" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="174.1" y="470" class="itemlabel" text-anchor="middle" fill="black">Css4j DOM</text>
<rect width="187.0" height="12.5" x="284.9" y="442.5" stroke="#ffffff" stroke-opacity="0.4" filter="url('#traversal-next-projection')"/>
<rect id="traversal-next-markTraverseDOM4J" width="187.0" height="12.5" x="284.9" y="442.5" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#c04d4d"/>
<rect width="187.0" height="12.5" x="284.9" y="442.5" fill="url('#traversal-next-reflection')"/>
<line x1="382.5" x2="382.5" y1="438.6" y2="445.4" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="377.4" y="470" class="itemlabel" text-anchor="middle" fill="black">Css4j-DOM4J</text>
<rect width="187.0" height="380.2" x="488.2" y="74.8" stroke="#ffffff" stroke-opacity="0.4" filter="url('#traversal-next-projection')"/>
<rect id="traversal-next-markTraverseJdk" width="187.0" height="380.2" x="488.2" y="74.8" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#c0c061"/>
<rect width="187.0" height="380.2" x="488.2" y="74.8" fill="url('#traversal-next-reflection')"/>
<line x1="585.8" x2="585.8" y1="64.3" y2="85.7" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="580.7" y="470" class="itemlabel" text-anchor="middle" fill="black">JDK</text>
<text x="74" y="59" class="scaleitem" text-anchor="end">6700</text>
<text x="74" y="139" class="scaleitem" text-anchor="end">5360</text>
<text x="74" y="219" class="scaleitem" text-anchor="end">4020</text>
<text x="74" y="299" class="scaleitem" text-anchor="end">2680</text>
<text x="74" y="379" class="scaleitem" text-anchor="end">1340</text>
<text x="74" y="459" class="scaleitem" text-anchor="end">0</text>
<text id="traversal-next-y-title" x="16" y="260" text-anchor="middle" fill="black" transform="rotate(270,16,260)">Throughput (ops/s)</text>
<text id="traversal-next-x-title" x="350" y="496" text-anchor="middle" fill="black">DOM Implementation</text>
<image src="benchmark/traversal-next.png" xlink:href=""/></svg>
<p>Numeric results (higher is better):</p>
<table class="normaltbl carteitem">
<thead><tr><th>Implementation</th><th>Score</th><th>Error</th><th>Unit</th></tr></thead><tbody>
<tr><td>Css4j DOM</td><td class="number">3,159.4</td><td class="number">±204.6</td><td>ops/s</td></tr>
<tr><td>Css4j-DOM4J</td><td class="number">211.8</td><td class="number">±57.1</td><td>ops/s</td></tr>
<tr><td>JDK</td><td class="number">6,432.7</td><td class="number">±181.4</td><td>ops/s</td></tr>
</tbody></table>
<p><em>Note:</em> for unknown reasons, the usual procedure to build the JDK document with a <code>DocumentBuilderFactory</code> could not be used to initialize the document
traversed in the benchmark, as that document is somehow left in an inconsistent state with no child nodes; this happened with the initialization code being executed in a
<code>Scope.Benchmark</code> class and also when in a <code>static</code> initialization block. When that same code is executed in a JUnit test, the problem is not seen.</p>
<p>Because of this reason the JDK DOM document was built with css4j's <a href="https://css4j.github.io/api/latest/io.sf.carte.css4j/io/sf/carte/doc/dom/XMLDocumentBuilder.html"><code>XMLDocumentBuilder</code></a>,
although that process is not part of the timed benchmark.</p>
</div>
<div class="tema" id="traversal-prev">
<h2>DOM traversal: <code>getLastChild()/getPreviousSibling()</code></h2>
<p>Count the nodes of an XML document, using a combination of <code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.xml/org/w3c/dom/Node.html#getLastChild()">getLastChild()</a>/<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.xml/org/w3c/dom/Node.html#getPreviousSibling()">getPreviousSibling()</a></code> to traverse it.</p>
<svg version="1.1" baseprofile="full" xmlns="http://www.w3.org/2000/svg" width="700" height="500" viewbox="0 0 700 500" class="carteitem">
<title>DOM Traversal: PreviousSibling</title><defs>
<clipPath id="traversal-prev-cut-scale-shadow">
  <rect width="623" height="15" x="71" y="41"/>
  <rect width="8" height="418" x="685" y="37"/>
</clipPath>
<linearGradient id="traversal-prev-background" gradientunits="objectBoundingBox" x1="1" x2="1" y1="0" y2="1">
<stop stop-color="#cde1ff" offset="0"/>
<stop stop-color="#ffffff" offset="0.9"/>
</linearGradient>
<linearGradient id="traversal-prev-reflection" gradientunits="objectBoundingBox" x1="0" x2="0" y1="0" y2="1">
<stop stop-color="#eeeeee" offset="0" stop-opacity="0.4"/>
<stop stop-color="#ffffff" offset="0.75" stop-opacity="0"/>
</linearGradient>
<filter id="traversal-prev-projection" filterunits="objectBoundingBox" x="0" y="-0.1" width="1.2" height="1.2">
<feGaussianBlur in="SourceAlpha" stddeviation="2" result="alpha_blur"/>
<feOffset in="alpha_blur" dx="3" dy="-3" result="offset_alpha_blur"/>
</filter>
</defs>
<style>text {
    font-family: "Open Sans", Verdana, sans-serif;
}
#traversal-prev-caption {
    font-size: 13pt;
    font-weight: 700;
}
#traversal-prev-subcaption {
    font-size: 9pt;
    font-weight: 600;
}
#traversal-prev-x-title,#traversal-prev-y-title {
    font-size: 10pt;
    font-weight: 700;
}
.traversal-prev-itemlabel {
    font-size: 9pt;
    font-weight: 400;
}
.traversal-prev-scaleItem {
    font-size: 9pt;
    font-weight: 300;
}
</style>
<rect width="100%" height="100%" fill="url('#traversal-prev-background')"/>
<rect width="610" height="400" x="75" y="55" stroke="#000000" fill="rgb(0,0,0)" fill-opacity="0" filter="url('#traversal-prev-projection')" clip-path="url('#traversal-prev-cut-scale-shadow')"/>
<rect id="traversal-prev-chartbox" width="610" height="400" x="75" y="55" stroke-width="1" stroke="#000000" fill="rgb(0,0,0)" fill-opacity="0"/>
<text id="traversal-prev-caption" x="355" y="22" text-anchor="middle" fill="black">DOM Traversal: PreviousSibling</text>
<text id="traversal-prev-subcaption" x="355" y="40" text-anchor="middle" fill="black">1MB file traversed by getLastChild()/getPreviousSibling()</text>
<rect width="187.0" height="145.1" x="81.5" y="309.9" stroke="#ffffff" stroke-opacity="0.4" filter="url('#traversal-prev-projection')"/>
<rect id="traversal-prev-markTraversePrevDOM" width="187.0" height="145.1" x="81.5" y="309.9" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#61c061"/>
<rect width="187.0" height="145.1" x="81.5" y="309.9" fill="url('#traversal-prev-reflection')"/>
<line x1="179.1" x2="179.1" y1="293.5" y2="326.5" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="174.1" y="470" class="itemlabel" text-anchor="middle" fill="black">Css4j DOM</text>
<rect width="187.0" height="8.6" x="284.9" y="446.4" stroke="#ffffff" stroke-opacity="0.4" filter="url('#traversal-prev-projection')"/>
<rect id="traversal-prev-markTraversePrevDOM4J" width="187.0" height="8.6" x="284.9" y="446.4" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#c04d4d"/>
<rect width="187.0" height="8.6" x="284.9" y="446.4" fill="url('#traversal-prev-reflection')"/>
<line x1="382.5" x2="382.5" y1="445.3" y2="446.7" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="377.4" y="470" class="itemlabel" text-anchor="middle" fill="black">Css4j-DOM4J</text>
<rect width="187.0" height="379.1" x="488.2" y="75.9" stroke="#ffffff" stroke-opacity="0.4" filter="url('#traversal-prev-projection')"/>
<rect id="traversal-prev-markTraversePrevJdk" width="187.0" height="379.1" x="488.2" y="75.9" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#c0c061"/>
<rect width="187.0" height="379.1" x="488.2" y="75.9" fill="url('#traversal-prev-reflection')"/>
<line x1="585.8" x2="585.8" y1="66.5" y2="85.5" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="580.7" y="470" class="itemlabel" text-anchor="middle" fill="black">JDK</text>
<text x="74" y="59" class="scaleitem" text-anchor="end">7500</text>
<text x="74" y="139" class="scaleitem" text-anchor="end">6000</text>
<text x="74" y="219" class="scaleitem" text-anchor="end">4500</text>
<text x="74" y="299" class="scaleitem" text-anchor="end">3000</text>
<text x="74" y="379" class="scaleitem" text-anchor="end">1500</text>
<text x="74" y="459" class="scaleitem" text-anchor="end">0</text>
<text id="traversal-prev-y-title" x="16" y="260" text-anchor="middle" fill="black" transform="rotate(270,16,260)">Throughput (ops/s)</text>
<text id="traversal-prev-x-title" x="350" y="496" text-anchor="middle" fill="black">DOM Implementation</text>
<image src="benchmark/traversal-prev.png" xlink:href=""/></svg>
<p>Numeric results (higher is better):</p>
<table class="normaltbl carteitem">
<thead><tr><th>Implementation</th><th>Score</th><th>Error</th><th>Unit</th></tr></thead><tbody>
<tr><td>Css4j DOM</td><td class="number">2,748.7</td><td class="number">±312.8</td><td>ops/s</td></tr>
<tr><td>Css4j-DOM4J</td><td class="number">163.0</td><td class="number">±12.7</td><td>ops/s</td></tr>
<tr><td>JDK</td><td class="number">7,179.1</td><td class="number">±179.9</td><td>ops/s</td></tr>
</tbody></table>
<p>The Css4j-DOM4J results are representative for DOM4J as well.</p>
</div>
<div class="tema" id="nodeiterator-small">
<h2>DOM traversal: <code>NodeIterator</code> (small file)</h2>
<p>Count the elements of a 38kB XHTML document traversed by a <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.xml/org/w3c/dom/traversal/NodeIterator.html"><code>NodeIterator</code></a>.</p>
<svg version="1.1" baseprofile="full" xmlns="http://www.w3.org/2000/svg" width="700" height="500" viewbox="0 0 700 500" class="carteitem">
<title>DOM Traversal: NodeIterator (small file)</title><defs>
<clipPath id="nodeiterator-small-cut-scale-shadow">
  <rect width="623" height="15" x="71" y="41"/>
  <rect width="8" height="418" x="685" y="37"/>
</clipPath>
<linearGradient id="nodeiterator-small-background" gradientunits="objectBoundingBox" x1="1" x2="1" y1="0" y2="1">
<stop stop-color="#cde1ff" offset="0"/>
<stop stop-color="#ffffff" offset="0.9"/>
</linearGradient>
<linearGradient id="nodeiterator-small-reflection" gradientunits="objectBoundingBox" x1="0" x2="0" y1="0" y2="1">
<stop stop-color="#eeeeee" offset="0" stop-opacity="0.4"/>
<stop stop-color="#ffffff" offset="0.75" stop-opacity="0"/>
</linearGradient>
<filter id="nodeiterator-small-projection" filterunits="objectBoundingBox" x="0" y="-0.1" width="1.2" height="1.2">
<feGaussianBlur in="SourceAlpha" stddeviation="2" result="alpha_blur"/>
<feOffset in="alpha_blur" dx="3" dy="-3" result="offset_alpha_blur"/>
</filter>
</defs>
<style>text {
    font-family: "Open Sans", Verdana, sans-serif;
}
#nodeiterator-small-caption {
    font-size: 13pt;
    font-weight: 700;
}
#nodeiterator-small-subcaption {
    font-size: 9pt;
    font-weight: 600;
}
#nodeiterator-small-x-title,#nodeiterator-small-y-title {
    font-size: 10pt;
    font-weight: 700;
}
.nodeiterator-small-itemlabel {
    font-size: 9pt;
    font-weight: 400;
}
.nodeiterator-small-scaleItem {
    font-size: 9pt;
    font-weight: 300;
}
</style>
<rect width="100%" height="100%" fill="url('#nodeiterator-small-background')"/>
<rect width="610" height="400" x="75" y="55" stroke="#000000" fill="rgb(0,0,0)" fill-opacity="0" filter="url('#nodeiterator-small-projection')" clip-path="url('#nodeiterator-small-cut-scale-shadow')"/>
<rect id="nodeiterator-small-chartbox" width="610" height="400" x="75" y="55" stroke-width="1" stroke="#000000" fill="rgb(0,0,0)" fill-opacity="0"/>
<text id="nodeiterator-small-caption" x="355" y="22" text-anchor="middle" fill="black">DOM Traversal: NodeIterator (small file)</text>
<text id="nodeiterator-small-subcaption" x="355" y="40" text-anchor="middle" fill="black">38kB file traversed by NodeIterator</text>
<rect width="285.0" height="384.7" x="83" y="70.3" stroke="#ffffff" stroke-opacity="0.4" filter="url('#nodeiterator-small-projection')"/>
<rect id="nodeiterator-small-markNodeIteratorDOM" width="285.0" height="384.7" x="83" y="70.3" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#61c061"/>
<rect width="285.0" height="384.7" x="83" y="70.3" fill="url('#nodeiterator-small-reflection')"/>
<line x1="229.4" x2="229.4" y1="65.5" y2="74.5" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="221.8" y="470" class="itemlabel" text-anchor="middle" fill="black">Css4j DOM</text>
<rect width="285.0" height="278" x="388" y="177" stroke="#ffffff" stroke-opacity="0.4" filter="url('#nodeiterator-small-projection')"/>
<rect id="nodeiterator-small-markNodeIteratorJdk" width="285.0" height="278" x="388" y="177" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#c0c061"/>
<rect width="285.0" height="278" x="388" y="177" fill="url('#nodeiterator-small-reflection')"/>
<line x1="534.4" x2="534.4" y1="171.6" y2="182.4" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="526.8" y="470" class="itemlabel" text-anchor="middle" fill="black">JDK</text>
<text x="74" y="59" class="scaleitem" text-anchor="end">118000</text>
<text x="74" y="139" class="scaleitem" text-anchor="end">94400</text>
<text x="74" y="219" class="scaleitem" text-anchor="end">70800</text>
<text x="74" y="299" class="scaleitem" text-anchor="end">47200</text>
<text x="74" y="379" class="scaleitem" text-anchor="end">23600</text>
<text x="74" y="459" class="scaleitem" text-anchor="end">0</text>
<text id="nodeiterator-small-y-title" x="16" y="260" text-anchor="middle" fill="black" transform="rotate(270,16,260)">Throughput (ops/s)</text>
<text id="nodeiterator-small-x-title" x="350" y="496" text-anchor="middle" fill="black">DOM Implementation</text>
<image src="benchmark/nodeiterator-small.png" xlink:href=""/></svg>
<p>Numeric results (higher is better):</p>
<table class="normaltbl carteitem">
<thead><tr><th>Implementation</th><th>Score</th><th>Error</th><th>Unit</th></tr></thead><tbody>
<tr><td>Css4j DOM</td><td class="number">114,626</td><td class="number">±1,354</td><td>ops/s</td></tr>
<tr><td>JDK</td><td class="number">82,837</td><td class="number">±1,624</td><td>ops/s</td></tr>
</tbody></table>
<p>DOM4J and Jsoup are not included as they lack a <code>NodeIterator</code>.</p>
</div>
<div class="tema" id="nodeiterator">
<h2>DOM traversal: <code>NodeIterator</code></h2>
<p>Count the elements of an XML document traversed by a <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.xml/org/w3c/dom/traversal/NodeIterator.html"><code>NodeIterator</code></a>.</p>
<svg version="1.1" baseprofile="full" xmlns="http://www.w3.org/2000/svg" width="700" height="500" viewbox="0 0 700 500" class="carteitem">
<title>DOM Traversal: NodeIterator</title><defs>
<clipPath id="nodeiterator-cut-scale-shadow">
  <rect width="623" height="15" x="71" y="41"/>
  <rect width="8" height="418" x="685" y="37"/>
</clipPath>
<linearGradient id="nodeiterator-background" gradientunits="objectBoundingBox" x1="1" x2="1" y1="0" y2="1">
<stop stop-color="#cde1ff" offset="0"/>
<stop stop-color="#ffffff" offset="0.9"/>
</linearGradient>
<linearGradient id="nodeiterator-reflection" gradientunits="objectBoundingBox" x1="0" x2="0" y1="0" y2="1">
<stop stop-color="#eeeeee" offset="0" stop-opacity="0.4"/>
<stop stop-color="#ffffff" offset="0.75" stop-opacity="0"/>
</linearGradient>
<filter id="nodeiterator-projection" filterunits="objectBoundingBox" x="0" y="-0.1" width="1.2" height="1.2">
<feGaussianBlur in="SourceAlpha" stddeviation="2" result="alpha_blur"/>
<feOffset in="alpha_blur" dx="3" dy="-3" result="offset_alpha_blur"/>
</filter>
</defs>
<style>text {
    font-family: "Open Sans", Verdana, sans-serif;
}
#nodeiterator-caption {
    font-size: 13pt;
    font-weight: 700;
}
#nodeiterator-subcaption {
    font-size: 9pt;
    font-weight: 600;
}
#nodeiterator-x-title,#nodeiterator-y-title {
    font-size: 10pt;
    font-weight: 700;
}
.nodeiterator-itemlabel {
    font-size: 9pt;
    font-weight: 400;
}
.nodeiterator-scaleItem {
    font-size: 9pt;
    font-weight: 300;
}
</style>
<rect width="100%" height="100%" fill="url('#nodeiterator-background')"/>
<rect width="610" height="400" x="75" y="55" stroke="#000000" fill="rgb(0,0,0)" fill-opacity="0" filter="url('#nodeiterator-projection')" clip-path="url('#nodeiterator-cut-scale-shadow')"/>
<rect id="nodeiterator-chartbox" width="610" height="400" x="75" y="55" stroke-width="1" stroke="#000000" fill="rgb(0,0,0)" fill-opacity="0"/>
<text id="nodeiterator-caption" x="355" y="22" text-anchor="middle" fill="black">DOM Traversal: NodeIterator</text>
<text id="nodeiterator-subcaption" x="355" y="40" text-anchor="middle" fill="black">1MB file traversed by NodeIterator</text>
<rect width="285.0" height="186.5" x="83" y="268.5" stroke="#ffffff" stroke-opacity="0.4" filter="url('#nodeiterator-projection')"/>
<rect id="nodeiterator-markNodeIteratorDOM" width="285.0" height="186.5" x="83" y="268.5" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#61c061"/>
<rect width="285.0" height="186.5" x="83" y="268.5" fill="url('#nodeiterator-reflection')"/>
<line x1="229.4" x2="229.4" y1="264.6" y2="271.4" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="221.8" y="470" class="itemlabel" text-anchor="middle" fill="black">Css4j DOM</text>
<rect width="285.0" height="372.9" x="388" y="82.1" stroke="#ffffff" stroke-opacity="0.4" filter="url('#nodeiterator-projection')"/>
<rect id="nodeiterator-markNodeIteratorJdk" width="285.0" height="372.9" x="388" y="82.1" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#c0c061"/>
<rect width="285.0" height="372.9" x="388" y="82.1" fill="url('#nodeiterator-reflection')"/>
<line x1="534.4" x2="534.4" y1="70.1" y2="93.9" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="526.8" y="470" class="itemlabel" text-anchor="middle" fill="black">JDK</text>
<text x="74" y="59" class="scaleitem" text-anchor="end">4700</text>
<text x="74" y="139" class="scaleitem" text-anchor="end">3760</text>
<text x="74" y="219" class="scaleitem" text-anchor="end">2820</text>
<text x="74" y="299" class="scaleitem" text-anchor="end">1880</text>
<text x="74" y="379" class="scaleitem" text-anchor="end">940</text>
<text x="74" y="459" class="scaleitem" text-anchor="end">0</text>
<text id="nodeiterator-y-title" x="16" y="260" text-anchor="middle" fill="black" transform="rotate(270,16,260)">Throughput (ops/s)</text>
<text id="nodeiterator-x-title" x="350" y="496" text-anchor="middle" fill="black">DOM Implementation</text>
<image src="benchmark/nodeiterator.png" xlink:href=""/></svg>
<p>Numeric results (higher is better):</p>
<table class="normaltbl carteitem">
<thead><tr><th>Implementation</th><th>Score</th><th>Error</th><th>Unit</th></tr></thead><tbody>
<tr><td>Css4j DOM</td><td class="number">2,214.1</td><td class="number">±39.9</td><td>ops/s</td></tr>
<tr><td>JDK</td><td class="number">4,425.9</td><td class="number">±141.5</td><td>ops/s</td></tr>
</tbody></table>
<p>DOM4J is not included as it lacks a <code>NodeIterator</code>.</p>
<p><em>Note:</em> sometimes the <code>NodeIterator</code> created by the JDK is in an inconsistent state, and fails with an exception like:</p>
<pre class="code"># Warmup Iteration   1: <failure>

java.lang.ArrayIndexOutOfBoundsException: Index 34 out of bounds for length 33
        at java.base/java.util.ArrayList.add(ArrayList.java:455)
        at java.base/java.util.ArrayList.add(ArrayList.java:467)
        at java.xml/com.sun.org.apache.xerces.internal.dom.DocumentImpl.createNodeIterator(DocumentImpl.java:255)
        at io.sf.carte.mark.dom.DOMIteratorMark.markNodeIteratorJdk(DOMIteratorMark.java:46)
</failure></pre>
<p>But I have observed this only while benchmarking, and not in other cases.</p>
</div>
<div class="tema" id="treewalker-small">
<h2>DOM traversal: <code>TreeWalker</code> (small file)</h2>
<p>Count the elements of a 38kB XHTML document traversed by a <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.xml/org/w3c/dom/traversal/TreeWalker.html"><code>TreeWalker</code></a>.</p>
<svg version="1.1" baseprofile="full" xmlns="http://www.w3.org/2000/svg" width="700" height="500" viewbox="0 0 700 500" class="carteitem">
<title>DOM Traversal: TreeWalker (small file)</title><defs>
<clipPath id="treewalker-small-cut-scale-shadow">
  <rect width="623" height="15" x="71" y="41"/>
  <rect width="8" height="418" x="685" y="37"/>
</clipPath>
<linearGradient id="treewalker-small-background" gradientunits="objectBoundingBox" x1="1" x2="1" y1="0" y2="1">
<stop stop-color="#cde1ff" offset="0"/>
<stop stop-color="#ffffff" offset="0.9"/>
</linearGradient>
<linearGradient id="treewalker-small-reflection" gradientunits="objectBoundingBox" x1="0" x2="0" y1="0" y2="1">
<stop stop-color="#eeeeee" offset="0" stop-opacity="0.4"/>
<stop stop-color="#ffffff" offset="0.75" stop-opacity="0"/>
</linearGradient>
<filter id="treewalker-small-projection" filterunits="objectBoundingBox" x="0" y="-0.1" width="1.2" height="1.2">
<feGaussianBlur in="SourceAlpha" stddeviation="2" result="alpha_blur"/>
<feOffset in="alpha_blur" dx="3" dy="-3" result="offset_alpha_blur"/>
</filter>
</defs>
<style>text {
    font-family: "Open Sans", Verdana, sans-serif;
}
#treewalker-small-caption {
    font-size: 13pt;
    font-weight: 700;
}
#treewalker-small-subcaption {
    font-size: 9pt;
    font-weight: 600;
}
#treewalker-small-x-title,#treewalker-small-y-title {
    font-size: 10pt;
    font-weight: 700;
}
.treewalker-small-itemlabel {
    font-size: 9pt;
    font-weight: 400;
}
.treewalker-small-scaleItem {
    font-size: 9pt;
    font-weight: 300;
}
</style>
<rect width="100%" height="100%" fill="url('#treewalker-small-background')"/>
<rect width="610" height="400" x="75" y="55" stroke="#000000" fill="rgb(0,0,0)" fill-opacity="0" filter="url('#treewalker-small-projection')" clip-path="url('#treewalker-small-cut-scale-shadow')"/>
<rect id="treewalker-small-chartbox" width="610" height="400" x="75" y="55" stroke-width="1" stroke="#000000" fill="rgb(0,0,0)" fill-opacity="0"/>
<text id="treewalker-small-caption" x="355" y="22" text-anchor="middle" fill="black">DOM Traversal: TreeWalker (small file)</text>
<text id="treewalker-small-subcaption" x="355" y="40" text-anchor="middle" fill="black">38kB file traversed by TreeWalker</text>
<rect width="285.0" height="205.2" x="83" y="249.8" stroke="#ffffff" stroke-opacity="0.4" filter="url('#treewalker-small-projection')"/>
<rect id="treewalker-small-markTreeWalkerDOM" width="285.0" height="205.2" x="83" y="249.8" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#61c061"/>
<rect width="285.0" height="205.2" x="83" y="249.8" fill="url('#treewalker-small-reflection')"/>
<line x1="229.4" x2="229.4" y1="248.2" y2="251.8" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="221.8" y="470" class="itemlabel" text-anchor="middle" fill="black">Css4j DOM</text>
<rect width="285.0" height="356.3" x="388" y="98.7" stroke="#ffffff" stroke-opacity="0.4" filter="url('#treewalker-small-projection')"/>
<rect id="treewalker-small-markTreeWalkerJdk" width="285.0" height="356.3" x="388" y="98.7" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#c0c061"/>
<rect width="285.0" height="356.3" x="388" y="98.7" fill="url('#treewalker-small-reflection')"/>
<line x1="534.4" x2="534.4" y1="64.5" y2="133.5" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="526.8" y="470" class="itemlabel" text-anchor="middle" fill="black">JDK</text>
<text x="74" y="59" class="scaleitem" text-anchor="end">109000</text>
<text x="74" y="139" class="scaleitem" text-anchor="end">87200</text>
<text x="74" y="219" class="scaleitem" text-anchor="end">65400</text>
<text x="74" y="299" class="scaleitem" text-anchor="end">43600</text>
<text x="74" y="379" class="scaleitem" text-anchor="end">21800</text>
<text x="74" y="459" class="scaleitem" text-anchor="end">0</text>
<text id="treewalker-small-y-title" x="16" y="260" text-anchor="middle" fill="black" transform="rotate(270,16,260)">Throughput (ops/s)</text>
<text id="treewalker-small-x-title" x="350" y="496" text-anchor="middle" fill="black">DOM Implementation</text>
<image src="benchmark/treewalker-small.png" xlink:href=""/></svg>
<p>Numeric results (higher is better):</p>
<table class="normaltbl carteitem">
<thead><tr><th>Implementation</th><th>Score</th><th>Error</th><th>Unit</th></tr></thead><tbody>
<tr><td>Css4j DOM</td><td class="number">56,486</td><td class="number">±487</td><td>ops/s</td></tr>
<tr><td>JDK</td><td class="number">98,074</td><td class="number">±9,500</td><td>ops/s</td></tr>
</tbody></table>
<p>Neither DOM4J nor Jsoup provide a <code>TreeWalker</code>.</p>
</div>
<div class="tema" id="treewalker">
<h2>DOM traversal: <code>TreeWalker</code></h2>
<p>Count the elements of an XML document traversed by a <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.xml/org/w3c/dom/traversal/TreeWalker.html"><code>TreeWalker</code></a>.</p>
<svg version="1.1" baseprofile="full" xmlns="http://www.w3.org/2000/svg" width="700" height="500" viewbox="0 0 700 500" class="carteitem">
<title>DOM Traversal: TreeWalker</title><defs>
<clipPath id="treewalker-cut-scale-shadow">
  <rect width="623" height="15" x="71" y="41"/>
  <rect width="8" height="418" x="685" y="37"/>
</clipPath>
<linearGradient id="treewalker-background" gradientunits="objectBoundingBox" x1="1" x2="1" y1="0" y2="1">
<stop stop-color="#cde1ff" offset="0"/>
<stop stop-color="#ffffff" offset="0.9"/>
</linearGradient>
<linearGradient id="treewalker-reflection" gradientunits="objectBoundingBox" x1="0" x2="0" y1="0" y2="1">
<stop stop-color="#eeeeee" offset="0" stop-opacity="0.4"/>
<stop stop-color="#ffffff" offset="0.75" stop-opacity="0"/>
</linearGradient>
<filter id="treewalker-projection" filterunits="objectBoundingBox" x="0" y="-0.1" width="1.2" height="1.2">
<feGaussianBlur in="SourceAlpha" stddeviation="2" result="alpha_blur"/>
<feOffset in="alpha_blur" dx="3" dy="-3" result="offset_alpha_blur"/>
</filter>
</defs>
<style>text {
    font-family: "Open Sans", Verdana, sans-serif;
}
#treewalker-caption {
    font-size: 13pt;
    font-weight: 700;
}
#treewalker-subcaption {
    font-size: 9pt;
    font-weight: 600;
}
#treewalker-x-title,#treewalker-y-title {
    font-size: 10pt;
    font-weight: 700;
}
.treewalker-itemlabel {
    font-size: 9pt;
    font-weight: 400;
}
.treewalker-scaleItem {
    font-size: 9pt;
    font-weight: 300;
}
</style>
<rect width="100%" height="100%" fill="url('#treewalker-background')"/>
<rect width="610" height="400" x="75" y="55" stroke="#000000" fill="rgb(0,0,0)" fill-opacity="0" filter="url('#treewalker-projection')" clip-path="url('#treewalker-cut-scale-shadow')"/>
<rect id="treewalker-chartbox" width="610" height="400" x="75" y="55" stroke-width="1" stroke="#000000" fill="rgb(0,0,0)" fill-opacity="0"/>
<text id="treewalker-caption" x="355" y="22" text-anchor="middle" fill="black">DOM Traversal: TreeWalker</text>
<text id="treewalker-subcaption" x="355" y="40" text-anchor="middle" fill="black">1MB file traversed by TreeWalker</text>
<rect width="285.0" height="179.1" x="83" y="275.9" stroke="#ffffff" stroke-opacity="0.4" filter="url('#treewalker-projection')"/>
<rect id="treewalker-markTreeWalkerDOM" width="285.0" height="179.1" x="83" y="275.9" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#61c061"/>
<rect width="285.0" height="179.1" x="83" y="275.9" fill="url('#treewalker-reflection')"/>
<line x1="229.4" x2="229.4" y1="272.9" y2="279.1" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="221.8" y="470" class="itemlabel" text-anchor="middle" fill="black">Css4j DOM</text>
<rect width="285.0" height="376.1" x="388" y="78.9" stroke="#ffffff" stroke-opacity="0.4" filter="url('#treewalker-projection')"/>
<rect id="treewalker-markTreeWalkerJdk" width="285.0" height="376.1" x="388" y="78.9" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#c0c061"/>
<rect width="285.0" height="376.1" x="388" y="78.9" fill="url('#treewalker-reflection')"/>
<line x1="534.4" x2="534.4" y1="63.9" y2="94.1" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="526.8" y="470" class="itemlabel" text-anchor="middle" fill="black">JDK</text>
<text x="74" y="59" class="scaleitem" text-anchor="end">4800</text>
<text x="74" y="139" class="scaleitem" text-anchor="end">3840</text>
<text x="74" y="219" class="scaleitem" text-anchor="end">2880</text>
<text x="74" y="299" class="scaleitem" text-anchor="end">1920</text>
<text x="74" y="379" class="scaleitem" text-anchor="end">960</text>
<text x="74" y="459" class="scaleitem" text-anchor="end">0</text>
<text id="treewalker-y-title" x="16" y="260" text-anchor="middle" fill="black" transform="rotate(270,16,260)">Throughput (ops/s)</text>
<text id="treewalker-x-title" x="350" y="496" text-anchor="middle" fill="black">DOM Implementation</text>
<image src="benchmark/treewalker.png" xlink:href=""/></svg>
<p>Numeric results (higher is better):</p>
<table class="normaltbl carteitem">
<thead><tr><th>Implementation</th><th>Score</th><th>Error</th><th>Unit</th></tr></thead><tbody>
<tr><td>Css4j DOM</td><td class="number">2,170.8</td><td class="number">±37.8</td><td>ops/s</td></tr>
<tr><td>JDK</td><td class="number">4,558.8</td><td class="number">±183.0</td><td>ops/s</td></tr>
</tbody></table>
<p>As mentioned, neither DOM4J nor Jsoup provide a <code>TreeWalker</code>.</p>
</div>
<div class="tema" id="iterator-small">
<h2>DOM traversal: <code>iterator()</code> (small file)</h2>
<p>Traverse a 38kB XHTML document using native DOM's iterable <a href="https://css4j.github.io/api/latest/io.sf.carte.css4j/io/sf/carte/doc/dom/DOMNode.html#getChildNodes()"><code>getChildNodes()</code></a>,
DOM4J's <a href="https://dom4j.github.io/javadoc/2.1.3/org/dom4j/Branch.html#nodeIterator--"><code>nodeIterator()</code></a> and Jsoup's
iterable <a href="https://jsoup.org/apidocs/org/jsoup/nodes/Node.html#childNodes()"><code>childNodes()</code></a>.</p>
<svg version="1.1" baseprofile="full" xmlns="http://www.w3.org/2000/svg" width="700" height="500" viewbox="0 0 700 500" class="carteitem">
<title>DOM Traversal: child node iterators (small file)</title><defs>
<clipPath id="iterator-small-cut-scale-shadow">
  <rect width="623" height="15" x="71" y="41"/>
  <rect width="8" height="418" x="685" y="37"/>
</clipPath>
<linearGradient id="iterator-small-background" gradientunits="objectBoundingBox" x1="1" x2="1" y1="0" y2="1">
<stop stop-color="#cde1ff" offset="0"/>
<stop stop-color="#ffffff" offset="0.9"/>
</linearGradient>
<linearGradient id="iterator-small-reflection" gradientunits="objectBoundingBox" x1="0" x2="0" y1="0" y2="1">
<stop stop-color="#eeeeee" offset="0" stop-opacity="0.4"/>
<stop stop-color="#ffffff" offset="0.75" stop-opacity="0"/>
</linearGradient>
<filter id="iterator-small-projection" filterunits="objectBoundingBox" x="0" y="-0.1" width="1.2" height="1.2">
<feGaussianBlur in="SourceAlpha" stddeviation="2" result="alpha_blur"/>
<feOffset in="alpha_blur" dx="3" dy="-3" result="offset_alpha_blur"/>
</filter>
</defs>
<style>text {
    font-family: "Open Sans", Verdana, sans-serif;
}
#iterator-small-caption {
    font-size: 13pt;
    font-weight: 700;
}
#iterator-small-subcaption {
    font-size: 9pt;
    font-weight: 600;
}
#iterator-small-x-title,#iterator-small-y-title {
    font-size: 10pt;
    font-weight: 700;
}
.iterator-small-itemlabel {
    font-size: 9pt;
    font-weight: 400;
}
.iterator-small-scaleItem {
    font-size: 9pt;
    font-weight: 300;
}
</style>
<rect width="100%" height="100%" fill="url('#iterator-small-background')"/>
<rect width="610" height="400" x="75" y="55" stroke="#000000" fill="rgb(0,0,0)" fill-opacity="0" filter="url('#iterator-small-projection')" clip-path="url('#iterator-small-cut-scale-shadow')"/>
<rect id="iterator-small-chartbox" width="610" height="400" x="75" y="55" stroke-width="1" stroke="#000000" fill="rgb(0,0,0)" fill-opacity="0"/>
<text id="iterator-small-caption" x="355" y="22" text-anchor="middle" fill="black">DOM Traversal: child node iterators (small file)</text>
<text id="iterator-small-subcaption" x="355" y="40" text-anchor="middle" fill="black">38kB file traversed by child iterators</text>
<rect width="187.0" height="386.4" x="81.5" y="68.6" stroke="#ffffff" stroke-opacity="0.4" filter="url('#iterator-small-projection')"/>
<rect id="iterator-small-markIteratorDOM" width="187.0" height="386.4" x="81.5" y="68.6" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#61c061"/>
<rect width="187.0" height="386.4" x="81.5" y="68.6" fill="url('#iterator-small-reflection')"/>
<line x1="179.1" x2="179.1" y1="64.6" y2="73.4" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="174.1" y="470" class="itemlabel" text-anchor="middle" fill="black">Css4j DOM</text>
<rect width="187.0" height="60" x="284.9" y="395" stroke="#ffffff" stroke-opacity="0.4" filter="url('#iterator-small-projection')"/>
<rect id="iterator-small-markIteratorDOM4J" width="187.0" height="60" x="284.9" y="395" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#4d4dc0"/>
<rect width="187.0" height="60" x="284.9" y="395" fill="url('#iterator-small-reflection')"/>
<line x1="382.5" x2="382.5" y1="394.7" y2="395.3" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="377.4" y="470" class="itemlabel" text-anchor="middle" fill="black">DOM4J</text>
<rect width="187.0" height="350.5" x="488.2" y="104.5" stroke="#ffffff" stroke-opacity="0.4" filter="url('#iterator-small-projection')"/>
<rect id="iterator-small-markIteratorJsoup" width="187.0" height="350.5" x="488.2" y="104.5" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#b0d0d0"/>
<rect width="187.0" height="350.5" x="488.2" y="104.5" fill="url('#iterator-small-reflection')"/>
<line x1="585.8" x2="585.8" y1="99.7" y2="108.3" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="580.7" y="470" class="itemlabel" text-anchor="middle" fill="black">Jsoup</text>
<text x="74" y="59" class="scaleitem" text-anchor="end">114000</text>
<text x="74" y="139" class="scaleitem" text-anchor="end">91200</text>
<text x="74" y="219" class="scaleitem" text-anchor="end">68400</text>
<text x="74" y="299" class="scaleitem" text-anchor="end">45600</text>
<text x="74" y="379" class="scaleitem" text-anchor="end">22800</text>
<text x="74" y="459" class="scaleitem" text-anchor="end">0</text>
<text id="iterator-small-y-title" x="16" y="260" text-anchor="middle" fill="black" transform="rotate(270,16,260)">Throughput (ops/s)</text>
<text id="iterator-small-x-title" x="350" y="496" text-anchor="middle" fill="black">DOM Implementation</text>
<image src="benchmark/iterator-small.png" xlink:href=""/></svg>
<p>Numeric results (higher is better):</p>
<table class="normaltbl carteitem">
<thead><tr><th>Implementation</th><th>Score</th><th>Error</th><th>Unit</th></tr></thead><tbody>
<tr><td>Css4j DOM</td><td class="number">111,245.8</td><td class="number">±1,274.0</td><td>ops/s</td></tr>
<tr><td>DOM4J</td><td class="number">17,267.2</td><td class="number">±82.7</td><td>ops/s</td></tr>
<tr><td>Jsoup</td><td class="number">100,902.9</td><td class="number">±1,250.8</td><td>ops/s</td></tr>
</tbody></table>
<p>The JDK's DOM provides no iterable child collections.</p>
</div>
<div class="tema" id="iterator">
<h2>DOM traversal: <code>iterator()</code></h2>
<p>Traverse an XML document using native DOM's iterable <a href="https://css4j.github.io/api/latest/io.sf.carte.css4j/io/sf/carte/doc/dom/DOMNode.html#getChildNodes()"><code>getChildNodes()</code></a>
and DOM4J's <a href="https://dom4j.github.io/javadoc/2.1.3/org/dom4j/Branch.html#nodeIterator--"><code>nodeIterator()</code></a>.</p>
<svg version="1.1" baseprofile="full" xmlns="http://www.w3.org/2000/svg" width="700" height="500" viewbox="0 0 700 500" class="carteitem">
<title>DOM Traversal: child node iterators</title><defs>
<clipPath id="iterator-cut-scale-shadow">
  <rect width="623" height="15" x="71" y="41"/>
  <rect width="8" height="418" x="685" y="37"/>
</clipPath>
<linearGradient id="iterator-background" gradientunits="objectBoundingBox" x1="1" x2="1" y1="0" y2="1">
<stop stop-color="#cde1ff" offset="0"/>
<stop stop-color="#ffffff" offset="0.9"/>
</linearGradient>
<linearGradient id="iterator-reflection" gradientunits="objectBoundingBox" x1="0" x2="0" y1="0" y2="1">
<stop stop-color="#eeeeee" offset="0" stop-opacity="0.4"/>
<stop stop-color="#ffffff" offset="0.75" stop-opacity="0"/>
</linearGradient>
<filter id="iterator-projection" filterunits="objectBoundingBox" x="0" y="-0.1" width="1.2" height="1.2">
<feGaussianBlur in="SourceAlpha" stddeviation="2" result="alpha_blur"/>
<feOffset in="alpha_blur" dx="3" dy="-3" result="offset_alpha_blur"/>
</filter>
</defs>
<style>text {
    font-family: "Open Sans", Verdana, sans-serif;
}
#iterator-caption {
    font-size: 13pt;
    font-weight: 700;
}
#iterator-subcaption {
    font-size: 9pt;
    font-weight: 600;
}
#iterator-x-title,#iterator-y-title {
    font-size: 10pt;
    font-weight: 700;
}
.iterator-itemlabel {
    font-size: 9pt;
    font-weight: 400;
}
.iterator-scaleItem {
    font-size: 9pt;
    font-weight: 300;
}
</style>
<rect width="100%" height="100%" fill="url('#iterator-background')"/>
<rect width="610" height="400" x="75" y="55" stroke="#000000" fill="rgb(0,0,0)" fill-opacity="0" filter="url('#iterator-projection')" clip-path="url('#iterator-cut-scale-shadow')"/>
<rect id="iterator-chartbox" width="610" height="400" x="75" y="55" stroke-width="1" stroke="#000000" fill="rgb(0,0,0)" fill-opacity="0"/>
<text id="iterator-caption" x="355" y="22" text-anchor="middle" fill="black">DOM Traversal: child node iterators</text>
<text id="iterator-subcaption" x="355" y="40" text-anchor="middle" fill="black">1MB file traversed by child iterators</text>
<rect width="285.0" height="367.7" x="83" y="87.3" stroke="#ffffff" stroke-opacity="0.4" filter="url('#iterator-projection')"/>
<rect id="iterator-markIteratorDOM" width="285.0" height="367.7" x="83" y="87.3" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#61c061"/>
<rect width="285.0" height="367.7" x="83" y="87.3" fill="url('#iterator-reflection')"/>
<line x1="229.4" x2="229.4" y1="63" y2="111" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="221.8" y="470" class="itemlabel" text-anchor="middle" fill="black">Css4j DOM</text>
<rect width="285.0" height="94.1" x="388" y="360.9" stroke="#ffffff" stroke-opacity="0.4" filter="url('#iterator-projection')"/>
<rect id="iterator-markIteratorDOM4J" width="285.0" height="94.1" x="388" y="360.9" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#4d4dc0"/>
<rect width="285.0" height="94.1" x="388" y="360.9" fill="url('#iterator-reflection')"/>
<line x1="534.4" x2="534.4" y1="358.3" y2="363.7" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="526.8" y="470" class="itemlabel" text-anchor="middle" fill="black">DOM4J</text>
<text x="74" y="59" class="scaleitem" text-anchor="end">2150</text>
<text x="74" y="139" class="scaleitem" text-anchor="end">1720</text>
<text x="74" y="219" class="scaleitem" text-anchor="end">1290</text>
<text x="74" y="299" class="scaleitem" text-anchor="end">860</text>
<text x="74" y="379" class="scaleitem" text-anchor="end">430</text>
<text x="74" y="459" class="scaleitem" text-anchor="end">0</text>
<text id="iterator-y-title" x="16" y="260" text-anchor="middle" fill="black" transform="rotate(270,16,260)">Throughput (ops/s)</text>
<text id="iterator-x-title" x="350" y="496" text-anchor="middle" fill="black">DOM Implementation</text>
<image src="benchmark/iterator.png" xlink:href=""/></svg>
<p>Numeric results (higher is better):</p>
<table class="normaltbl carteitem">
<thead><tr><th>Implementation</th><th>Score</th><th>Error</th><th>Unit</th></tr></thead><tbody>
<tr><td>Css4j DOM</td><td class="number">1,996.5</td><td class="number">±130.5</td><td>ops/s</td></tr>
<tr><td>DOM4J</td><td class="number">510.7</td><td class="number">±14.7</td><td>ops/s</td></tr>
</tbody></table>
<p>The JDK's DOM provides no iterable child collections, and Jsoup is not suitable for XML documents (neither was included).</p>
</div>
<div class="tema" id="element-iterator-small">
<h2>DOM traversal: <code>elementIterator()</code> (small file)</h2>
<p>Traverse a 38kB XHTML document using native DOM's <a href="https://css4j.github.io/api/latest/io.sf.carte.css4j/io/sf/carte/doc/dom/ParentNode.html#elementIterator()"><code>elementIterator()</code></a>,
DOM4J's <a href="https://dom4j.github.io/javadoc/2.1.3/org/dom4j/Element.html#elementIterator--"><code>elementIterator()</code></a> and Jsoup's
iterable <a href="https://jsoup.org/apidocs/org/jsoup/select/Elements.html"><code>Elements</code></a>.</p>
<svg version="1.1" baseprofile="full" xmlns="http://www.w3.org/2000/svg" width="700" height="500" viewbox="0 0 700 500" class="carteitem">
<title>DOM Traversal: element iterators (small file)</title><defs>
<clipPath id="element-iterator-small-cut-scale-shadow">
  <rect width="623" height="15" x="71" y="41"/>
  <rect width="8" height="418" x="685" y="37"/>
</clipPath>
<linearGradient id="element-iterator-small-background" gradientunits="objectBoundingBox" x1="1" x2="1" y1="0" y2="1">
<stop stop-color="#cde1ff" offset="0"/>
<stop stop-color="#ffffff" offset="0.9"/>
</linearGradient>
<linearGradient id="element-iterator-small-reflection" gradientunits="objectBoundingBox" x1="0" x2="0" y1="0" y2="1">
<stop stop-color="#eeeeee" offset="0" stop-opacity="0.4"/>
<stop stop-color="#ffffff" offset="0.75" stop-opacity="0"/>
</linearGradient>
<filter id="element-iterator-small-projection" filterunits="objectBoundingBox" x="0" y="-0.1" width="1.2" height="1.2">
<feGaussianBlur in="SourceAlpha" stddeviation="2" result="alpha_blur"/>
<feOffset in="alpha_blur" dx="3" dy="-3" result="offset_alpha_blur"/>
</filter>
</defs>
<style>text {
    font-family: "Open Sans", Verdana, sans-serif;
}
#element-iterator-small-caption {
    font-size: 13pt;
    font-weight: 700;
}
#element-iterator-small-subcaption {
    font-size: 9pt;
    font-weight: 600;
}
#element-iterator-small-x-title,#element-iterator-small-y-title {
    font-size: 10pt;
    font-weight: 700;
}
.element-iterator-small-itemlabel {
    font-size: 9pt;
    font-weight: 400;
}
.element-iterator-small-scaleItem {
    font-size: 9pt;
    font-weight: 300;
}
</style>
<rect width="100%" height="100%" fill="url('#element-iterator-small-background')"/>
<rect width="610" height="400" x="75" y="55" stroke="#000000" fill="rgb(0,0,0)" fill-opacity="0" filter="url('#element-iterator-small-projection')" clip-path="url('#element-iterator-small-cut-scale-shadow')"/>
<rect id="element-iterator-small-chartbox" width="610" height="400" x="75" y="55" stroke-width="1" stroke="#000000" fill="rgb(0,0,0)" fill-opacity="0"/>
<text id="element-iterator-small-caption" x="355" y="22" text-anchor="middle" fill="black">DOM Traversal: element iterators (small file)</text>
<text id="element-iterator-small-subcaption" x="355" y="40" text-anchor="middle" fill="black">38kB file traversed by elementIterator()</text>
<rect width="187.0" height="245.5" x="81.5" y="209.5" stroke="#ffffff" stroke-opacity="0.4" filter="url('#element-iterator-small-projection')"/>
<rect id="element-iterator-small-markElementIteratorDOM" width="187.0" height="245.5" x="81.5" y="209.5" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#61c061"/>
<rect width="187.0" height="245.5" x="81.5" y="209.5" fill="url('#element-iterator-small-reflection')"/>
<line x1="179.1" x2="179.1" y1="203.3" y2="216.7" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="174.1" y="470" class="itemlabel" text-anchor="middle" fill="black">Css4j DOM</text>
<rect width="187.0" height="43" x="284.9" y="412" stroke="#ffffff" stroke-opacity="0.4" filter="url('#element-iterator-small-projection')"/>
<rect id="element-iterator-small-markElementIteratorDOM4J" width="187.0" height="43" x="284.9" y="412" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#4d4dc0"/>
<rect width="187.0" height="43" x="284.9" y="412" fill="url('#element-iterator-small-reflection')"/>
<line x1="382.5" x2="382.5" y1="411.7" y2="412.3" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="377.4" y="470" class="itemlabel" text-anchor="middle" fill="black">DOM4J</text>
<rect width="187.0" height="383.9" x="488.2" y="71.1" stroke="#ffffff" stroke-opacity="0.4" filter="url('#element-iterator-small-projection')"/>
<rect id="element-iterator-small-markElementIteratorJsoup" width="187.0" height="383.9" x="488.2" y="71.1" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#b0d0d0"/>
<rect width="187.0" height="383.9" x="488.2" y="71.1" fill="url('#element-iterator-small-reflection')"/>
<line x1="585.8" x2="585.8" y1="64.7" y2="77.3" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="580.7" y="470" class="itemlabel" text-anchor="middle" fill="black">Jsoup</text>
<text x="74" y="59" class="scaleitem" text-anchor="end">162000</text>
<text x="74" y="139" class="scaleitem" text-anchor="end">129600</text>
<text x="74" y="219" class="scaleitem" text-anchor="end">97200</text>
<text x="74" y="299" class="scaleitem" text-anchor="end">64800</text>
<text x="74" y="379" class="scaleitem" text-anchor="end">32400</text>
<text x="74" y="459" class="scaleitem" text-anchor="end">0</text>
<text id="element-iterator-small-y-title" x="16" y="260" text-anchor="middle" fill="black" transform="rotate(270,16,260)">Throughput (ops/s)</text>
<text id="element-iterator-small-x-title" x="350" y="496" text-anchor="middle" fill="black">DOM Implementation</text>
<image src="benchmark/element-iterator-small.png" xlink:href=""/></svg>
<p>Numeric results (higher is better):</p>
<table class="normaltbl carteitem">
<thead><tr><th>Implementation</th><th>Score</th><th>Error</th><th>Unit</th></tr></thead><tbody>
<tr><td>Css4j DOM</td><td class="number">100,430</td><td class="number">±2,733</td><td>ops/s</td></tr>
<tr><td>DOM4J</td><td class="number">17,604</td><td class="number">±105</td><td>ops/s</td></tr>
<tr><td>Jsoup</td><td class="number">157,065</td><td class="number">±2,585</td><td>ops/s</td></tr>
</tbody></table>
<p>The JDK's DOM provides no element iterator.</p>
</div>
<div class="tema" id="element-iterator">
<h2>DOM traversal: <code>elementIterator()</code></h2>
<p>Traverse an XML document using native DOM's <a href="https://css4j.github.io/api/latest/io.sf.carte.css4j/io/sf/carte/doc/dom/ParentNode.html#elementIterator()"><code>elementIterator()</code></a>
and DOM4J's <a href="https://dom4j.github.io/javadoc/2.1.3/org/dom4j/Element.html#elementIterator--"><code>elementIterator()</code></a>.</p>
<svg version="1.1" baseprofile="full" xmlns="http://www.w3.org/2000/svg" width="700" height="500" viewbox="0 0 700 500" class="carteitem">
<title>DOM Traversal: element iterators</title><defs>
<clipPath id="element-iterator-cut-scale-shadow">
  <rect width="623" height="15" x="71" y="41"/>
  <rect width="8" height="418" x="685" y="37"/>
</clipPath>
<linearGradient id="element-iterator-background" gradientunits="objectBoundingBox" x1="1" x2="1" y1="0" y2="1">
<stop stop-color="#cde1ff" offset="0"/>
<stop stop-color="#ffffff" offset="0.9"/>
</linearGradient>
<linearGradient id="element-iterator-reflection" gradientunits="objectBoundingBox" x1="0" x2="0" y1="0" y2="1">
<stop stop-color="#eeeeee" offset="0" stop-opacity="0.4"/>
<stop stop-color="#ffffff" offset="0.75" stop-opacity="0"/>
</linearGradient>
<filter id="element-iterator-projection" filterunits="objectBoundingBox" x="0" y="-0.1" width="1.2" height="1.2">
<feGaussianBlur in="SourceAlpha" stddeviation="2" result="alpha_blur"/>
<feOffset in="alpha_blur" dx="3" dy="-3" result="offset_alpha_blur"/>
</filter>
</defs>
<style>text {
    font-family: "Open Sans", Verdana, sans-serif;
}
#element-iterator-caption {
    font-size: 13pt;
    font-weight: 700;
}
#element-iterator-subcaption {
    font-size: 9pt;
    font-weight: 600;
}
#element-iterator-x-title,#element-iterator-y-title {
    font-size: 10pt;
    font-weight: 700;
}
.element-iterator-itemlabel {
    font-size: 9pt;
    font-weight: 400;
}
.element-iterator-scaleItem {
    font-size: 9pt;
    font-weight: 300;
}
</style>
<rect width="100%" height="100%" fill="url('#element-iterator-background')"/>
<rect width="610" height="400" x="75" y="55" stroke="#000000" fill="rgb(0,0,0)" fill-opacity="0" filter="url('#element-iterator-projection')" clip-path="url('#element-iterator-cut-scale-shadow')"/>
<rect id="element-iterator-chartbox" width="610" height="400" x="75" y="55" stroke-width="1" stroke="#000000" fill="rgb(0,0,0)" fill-opacity="0"/>
<text id="element-iterator-caption" x="355" y="22" text-anchor="middle" fill="black">DOM Traversal: element iterators</text>
<text id="element-iterator-subcaption" x="355" y="40" text-anchor="middle" fill="black">1MB file traversed by elementIterator()</text>
<rect width="285.0" height="357.6" x="83" y="97.4" stroke="#ffffff" stroke-opacity="0.4" filter="url('#element-iterator-projection')"/>
<rect id="element-iterator-markElementIteratorDOM" width="285.0" height="357.6" x="83" y="97.4" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#61c061"/>
<rect width="285.0" height="357.6" x="83" y="97.4" fill="url('#element-iterator-reflection')"/>
<line x1="229.4" x2="229.4" y1="63.7" y2="130.3" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="221.8" y="470" class="itemlabel" text-anchor="middle" fill="black">Css4j DOM</text>
<rect width="285.0" height="78.7" x="388" y="376.3" stroke="#ffffff" stroke-opacity="0.4" filter="url('#element-iterator-projection')"/>
<rect id="element-iterator-markElementIteratorDOM4J" width="285.0" height="78.7" x="388" y="376.3" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#4d4dc0"/>
<rect width="285.0" height="78.7" x="388" y="376.3" fill="url('#element-iterator-reflection')"/>
<line x1="534.4" x2="534.4" y1="374.4" y2="377.6" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="526.8" y="470" class="itemlabel" text-anchor="middle" fill="black">DOM4J</text>
<text x="74" y="59" class="scaleitem" text-anchor="end">2600</text>
<text x="74" y="139" class="scaleitem" text-anchor="end">2080</text>
<text x="74" y="219" class="scaleitem" text-anchor="end">1560</text>
<text x="74" y="299" class="scaleitem" text-anchor="end">1040</text>
<text x="74" y="379" class="scaleitem" text-anchor="end">520</text>
<text x="74" y="459" class="scaleitem" text-anchor="end">0</text>
<text id="element-iterator-y-title" x="16" y="260" text-anchor="middle" fill="black" transform="rotate(270,16,260)">Throughput (ops/s)</text>
<text id="element-iterator-x-title" x="350" y="496" text-anchor="middle" fill="black">DOM Implementation</text>
<image src="benchmark/element-iterator.png" xlink:href=""/></svg>
<p>Numeric results (higher is better):</p>
<table class="normaltbl carteitem">
<thead><tr><th>Implementation</th><th>Score</th><th>Error</th><th>Unit</th></tr></thead><tbody>
<tr><td>Css4j DOM</td><td class="number">2,348.0</td><td class="number">±218.6</td><td>ops/s</td></tr>
<tr><td>DOM4J</td><td class="number">516.7</td><td class="number">±10.6</td><td>ops/s</td></tr>
</tbody></table>
<p>The JDK's DOM provides no element iterator, and Jsoup is not suitable for XML documents (neither was included).</p>
</div>
<div class="tema" id="elements-by-tagname-small">
<h2>DOM traversal: <code>getElementsByTagName()</code> (small file)</h2>
<p>Traverse the list given by <code>getElementsByTagName()</code> from a 38kB document (it is an XHTML file so Jsoup is included
in the comparison). In the case of css4j's native DOM, there are two results: one iterating the
<a href="https://dom.spec.whatwg.org/#interface-nodelist"><code>NodeList</code></a> by the <code>item()</code> method, and another
via the iterator (the returned <code>NodeList</code> implements
<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Iterable.html"><code>Iterable</code></a>).</p>
<svg version="1.1" baseprofile="full" xmlns="http://www.w3.org/2000/svg" width="700" height="500" viewbox="0 0 700 500" class="carteitem">
<title>DOM getElementsByTagName() (small file)</title><defs>
<clipPath id="elements-by-tagname-small-cut-scale-shadow">
  <rect width="623" height="15" x="71" y="41"/>
  <rect width="8" height="418" x="685" y="37"/>
</clipPath>
<linearGradient id="elements-by-tagname-small-background" gradientunits="objectBoundingBox" x1="1" x2="1" y1="0" y2="1">
<stop stop-color="#cde1ff" offset="0"/>
<stop stop-color="#ffffff" offset="0.9"/>
</linearGradient>
<linearGradient id="elements-by-tagname-small-reflection" gradientunits="objectBoundingBox" x1="0" x2="0" y1="0" y2="1">
<stop stop-color="#eeeeee" offset="0" stop-opacity="0.4"/>
<stop stop-color="#ffffff" offset="0.75" stop-opacity="0"/>
</linearGradient>
<filter id="elements-by-tagname-small-projection" filterunits="objectBoundingBox" x="0" y="-0.1" width="1.2" height="1.2">
<feGaussianBlur in="SourceAlpha" stddeviation="2" result="alpha_blur"/>
<feOffset in="alpha_blur" dx="3" dy="-3" result="offset_alpha_blur"/>
</filter>
</defs>
<style>text {
    font-family: "Open Sans", Verdana, sans-serif;
}
#elements-by-tagname-small-caption {
    font-size: 13pt;
    font-weight: 700;
}
#elements-by-tagname-small-subcaption {
    font-size: 9pt;
    font-weight: 600;
}
#elements-by-tagname-small-x-title,#elements-by-tagname-small-y-title {
    font-size: 10pt;
    font-weight: 700;
}
.elements-by-tagname-small-itemlabel {
    font-size: 9pt;
    font-weight: 400;
}
.elements-by-tagname-small-scaleItem {
    font-size: 9pt;
    font-weight: 300;
}
</style>
<rect width="100%" height="100%" fill="url('#elements-by-tagname-small-background')"/>
<rect width="610" height="400" x="75" y="55" stroke="#000000" fill="rgb(0,0,0)" fill-opacity="0" filter="url('#elements-by-tagname-small-projection')" clip-path="url('#elements-by-tagname-small-cut-scale-shadow')"/>
<rect id="elements-by-tagname-small-chartbox" width="610" height="400" x="75" y="55" stroke-width="1" stroke="#000000" fill="rgb(0,0,0)" fill-opacity="0"/>
<text id="elements-by-tagname-small-caption" x="355" y="22" text-anchor="middle" fill="black">DOM getElementsByTagName() (small file)</text>
<text id="elements-by-tagname-small-subcaption" x="355" y="40" text-anchor="middle" fill="black">Traverse 713 elements given by getElementsByTagName()</text>
<rect width="88.0" height="21.3" x="80.5" y="433.7" stroke="#ffffff" stroke-opacity="0.4" filter="url('#elements-by-tagname-small-projection')"/>
<rect id="elements-by-tagname-small-markElementsByTagNameDOM" width="88.0" height="21.3" x="80.5" y="433.7" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#61c061"/>
<rect width="88.0" height="21.3" x="80.5" y="433.7" fill="url('#elements-by-tagname-small-reflection')"/>
<line x1="129.3" x2="129.3" y1="433.4" y2="434.6" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="126.7" y="470" class="itemlabel" text-anchor="middle" fill="black">Css4j DOM</text>
<rect width="88.0" height="35.5" x="182.1" y="419.5" stroke="#ffffff" stroke-opacity="0.4" filter="url('#elements-by-tagname-small-projection')"/>
<rect id="elements-by-tagname-small-markElementsByTagNameDOM4J" width="88.0" height="35.5" x="182.1" y="419.5" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#c04d4d"/>
<rect width="88.0" height="35.5" x="182.1" y="419.5" fill="url('#elements-by-tagname-small-reflection')"/>
<line x1="230.9" x2="230.9" y1="419.8" y2="420.2" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="228.4" y="470" class="itemlabel" text-anchor="middle" fill="black">Css4j-DOM4J</text>
<rect width="88.0" height="386.7" x="283.8" y="68.3" stroke="#ffffff" stroke-opacity="0.4" filter="url('#elements-by-tagname-small-projection')"/>
<rect id="elements-by-tagname-small-markElementsByTagNameDOMit" width="88.0" height="386.7" x="283.8" y="68.3" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#c04dc0"/>
<rect width="88.0" height="386.7" x="283.8" y="68.3" fill="url('#elements-by-tagname-small-reflection')"/>
<line x1="332.6" x2="332.6" y1="64.8" y2="71.2" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="330.1" y="470" class="itemlabel" text-anchor="middle" fill="black">
				<tspan x="330.1">Css4j DOM</tspan> <tspan style="font-size: smaller; " x="330.1" dy="14.4">(iterator)</tspan>
			</text>
<rect width="88.0" height="237.3" x="385.5" y="217.7" stroke="#ffffff" stroke-opacity="0.4" filter="url('#elements-by-tagname-small-projection')"/>
<rect id="elements-by-tagname-small-markElementsByTagNameJdk" width="88.0" height="237.3" x="385.5" y="217.7" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#c0c061"/>
<rect width="88.0" height="237.3" x="385.5" y="217.7" fill="url('#elements-by-tagname-small-reflection')"/>
<line x1="434.3" x2="434.3" y1="204.1" y2="231.9" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="431.7" y="470" class="itemlabel" text-anchor="middle" fill="black">JDK</text>
<rect width="88.0" height="267.5" x="487.1" y="187.5" stroke="#ffffff" stroke-opacity="0.4" filter="url('#elements-by-tagname-small-projection')"/>
<rect id="elements-by-tagname-small-markElementsByTagNameJsoup" width="88.0" height="267.5" x="487.1" y="187.5" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#b0d0d0"/>
<rect width="88.0" height="267.5" x="487.1" y="187.5" fill="url('#elements-by-tagname-small-reflection')"/>
<line x1="535.9" x2="535.9" y1="185.3" y2="188.7" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="533.4" y="470" class="itemlabel" text-anchor="middle" fill="black">Jsoup</text>
<rect width="88.0" height="226.2" x="588.8" y="228.8" stroke="#ffffff" stroke-opacity="0.4" filter="url('#elements-by-tagname-small-projection')"/>
<rect id="elements-by-tagname-small-markElementsByTagNameJsoupIt" width="88.0" height="226.2" x="588.8" y="228.8" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#a57b34"/>
<rect width="88.0" height="226.2" x="588.8" y="228.8" fill="url('#elements-by-tagname-small-reflection')"/>
<line x1="637.6" x2="637.6" y1="214.5" y2="243.5" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="635.1" y="470" class="itemlabel" text-anchor="middle" fill="black">
				<tspan x="635.1">Jsoup</tspan> <tspan style="font-size: smaller; " x="635.1" dy="14.4">(iterator)</tspan>
			</text>
<text x="74" y="59" class="scaleitem" text-anchor="end">143000</text>
<text x="74" y="139" class="scaleitem" text-anchor="end">114400</text>
<text x="74" y="219" class="scaleitem" text-anchor="end">85800</text>
<text x="74" y="299" class="scaleitem" text-anchor="end">57200</text>
<text x="74" y="379" class="scaleitem" text-anchor="end">28600</text>
<text x="74" y="459" class="scaleitem" text-anchor="end">0</text>
<text id="elements-by-tagname-small-y-title" x="16" y="260" text-anchor="middle" fill="black" transform="rotate(270,16,260)">Throughput (ops/s)</text>
<text id="elements-by-tagname-small-x-title" x="350" y="496" text-anchor="middle" fill="black">DOM Implementation</text>
<image src="benchmark/elements-by-tagname-small.png" xlink:href=""/></svg>
<p>Numeric results (higher is better):</p>
<table class="normaltbl carteitem">
<thead><tr><th>Implementation</th><th>Score</th><th>Error</th><th>Unit</th></tr></thead><tbody>
<tr><td>Css4j DOM</td><td class="number">7,697.8</td><td class="number">±218.0</td><td>ops/s</td></tr>
<tr><td>Css4j-DOM4J</td><td class="number">12,801.6</td><td class="number">±78.9</td><td>ops/s</td></tr>
<tr><td>Css4j DOM (iterator)</td><td class="number">139,647.5</td><td class="number">±1,166.2</td><td>ops/s</td></tr>
<tr><td>JDK</td><td class="number">85,690.6</td><td class="number">±5,013.1</td><td>ops/s</td></tr>
<tr><td>Jsoup</td><td class="number">96,601.6</td><td class="number">±598.2</td><td>ops/s</td></tr>
<tr><td>Jsoup (iterator)</td><td class="number">81,676.9</td><td class="number">±5,227.3</td><td>ops/s</td></tr>
</tbody></table>
</div>
<div class="tema" id="elements-by-tagname">
<h2>DOM traversal: <code>getElementsByTagName()</code></h2>
<p>Traverse the list given by <code>getElementsByTagName()</code>, this time from a 1MB document. Again, for css4j's native DOM there are two results: one iterating the
<a href="https://dom.spec.whatwg.org/#interface-nodelist"><code>NodeList</code></a> by the <code>item()</code> method, and another via the iterator
(the returned <code>NodeList</code> implements <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Iterable.html"><code>Iterable</code></a>).</p>
<svg version="1.1" baseprofile="full" xmlns="http://www.w3.org/2000/svg" width="700" height="500" viewbox="0 0 700 500" class="carteitem">
<title>DOM getElementsByTagName()</title><defs>
<clipPath id="elements-by-tagname-cut-scale-shadow">
  <rect width="623" height="15" x="71" y="41"/>
  <rect width="8" height="418" x="685" y="37"/>
</clipPath>
<linearGradient id="elements-by-tagname-background" gradientunits="objectBoundingBox" x1="1" x2="1" y1="0" y2="1">
<stop stop-color="#cde1ff" offset="0"/>
<stop stop-color="#ffffff" offset="0.9"/>
</linearGradient>
<linearGradient id="elements-by-tagname-reflection" gradientunits="objectBoundingBox" x1="0" x2="0" y1="0" y2="1">
<stop stop-color="#eeeeee" offset="0" stop-opacity="0.4"/>
<stop stop-color="#ffffff" offset="0.75" stop-opacity="0"/>
</linearGradient>
<filter id="elements-by-tagname-projection" filterunits="objectBoundingBox" x="0" y="-0.1" width="1.2" height="1.2">
<feGaussianBlur in="SourceAlpha" stddeviation="2" result="alpha_blur"/>
<feOffset in="alpha_blur" dx="3" dy="-3" result="offset_alpha_blur"/>
</filter>
</defs>
<style>text {
    font-family: "Open Sans", Verdana, sans-serif;
}
#elements-by-tagname-caption {
    font-size: 13pt;
    font-weight: 700;
}
#elements-by-tagname-subcaption {
    font-size: 9pt;
    font-weight: 600;
}
#elements-by-tagname-x-title,#elements-by-tagname-y-title {
    font-size: 10pt;
    font-weight: 700;
}
.elements-by-tagname-itemlabel {
    font-size: 9pt;
    font-weight: 400;
}
.elements-by-tagname-scaleItem {
    font-size: 9pt;
    font-weight: 300;
}
</style>
<rect width="100%" height="100%" fill="url('#elements-by-tagname-background')"/>
<rect width="610" height="400" x="75" y="55" stroke="#000000" fill="rgb(0,0,0)" fill-opacity="0" filter="url('#elements-by-tagname-projection')" clip-path="url('#elements-by-tagname-cut-scale-shadow')"/>
<rect id="elements-by-tagname-chartbox" width="610" height="400" x="75" y="55" stroke-width="1" stroke="#000000" fill="rgb(0,0,0)" fill-opacity="0"/>
<text id="elements-by-tagname-caption" x="355" y="22" text-anchor="middle" fill="black">DOM getElementsByTagName()</text>
<text id="elements-by-tagname-subcaption" x="355" y="40" text-anchor="middle" fill="black">Traverse 3152 elements given by getElementsByTagName()</text>
<rect width="138.0" height="0.4" x="80.8" y="454.6" stroke="#ffffff" stroke-opacity="0.4" filter="url('#elements-by-tagname-projection')"/>
<rect id="elements-by-tagname-markElementsByTagNameDOM" width="138.0" height="0.4" x="80.8" y="454.6" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#61c061"/>
<rect width="138.0" height="0.4" x="80.8" y="454.6" fill="url('#elements-by-tagname-reflection')"/>
<line x1="154" x2="154" y1="455" y2="455" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="150.2" y="470" class="itemlabel" text-anchor="middle" fill="black">Css4j DOM</text>
<rect width="138.0" height="85.4" x="233.3" y="369.6" stroke="#ffffff" stroke-opacity="0.4" filter="url('#elements-by-tagname-projection')"/>
<rect id="elements-by-tagname-markElementsByTagNameDOM4J" width="138.0" height="85.4" x="233.3" y="369.6" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#c04d4d"/>
<rect width="138.0" height="85.4" x="233.3" y="369.6" fill="url('#elements-by-tagname-reflection')"/>
<line x1="306.5" x2="306.5" y1="369" y2="371" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="302.7" y="470" class="itemlabel" text-anchor="middle" fill="black">Css4j-DOM4J</text>
<rect width="138.0" height="315.4" x="385.8" y="139.6" stroke="#ffffff" stroke-opacity="0.4" filter="url('#elements-by-tagname-projection')"/>
<rect id="elements-by-tagname-markElementsByTagNameDOMit" width="138.0" height="315.4" x="385.8" y="139.6" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#c04dc0"/>
<rect width="138.0" height="315.4" x="385.8" y="139.6" fill="url('#elements-by-tagname-reflection')"/>
<line x1="459" x2="459" y1="101.5" y2="178.5" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="455.2" y="470" class="itemlabel" text-anchor="middle" fill="black">
				<tspan x="455.2">Css4j DOM</tspan> <tspan style="font-size: smaller; " x="455.2" dy="14.4">(iterator)</tspan>
			</text>
<rect width="138.0" height="390.2" x="538.3" y="64.8" stroke="#ffffff" stroke-opacity="0.4" filter="url('#elements-by-tagname-projection')"/>
<rect id="elements-by-tagname-markElementsByTagNameJdk" width="138.0" height="390.2" x="538.3" y="64.8" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#c0c061"/>
<rect width="138.0" height="390.2" x="538.3" y="64.8" fill="url('#elements-by-tagname-reflection')"/>
<line x1="611.5" x2="611.5" y1="63.4" y2="66.6" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="607.7" y="470" class="itemlabel" text-anchor="middle" fill="black">JDK</text>
<text x="74" y="59" class="scaleitem" text-anchor="end">2140</text>
<text x="74" y="139" class="scaleitem" text-anchor="end">1712</text>
<text x="74" y="219" class="scaleitem" text-anchor="end">1284</text>
<text x="74" y="299" class="scaleitem" text-anchor="end">856</text>
<text x="74" y="379" class="scaleitem" text-anchor="end">428</text>
<text x="74" y="459" class="scaleitem" text-anchor="end">0</text>
<text id="elements-by-tagname-y-title" x="16" y="260" text-anchor="middle" fill="black" transform="rotate(270,16,260)">Throughput (ops/s)</text>
<text id="elements-by-tagname-x-title" x="350" y="496" text-anchor="middle" fill="black">DOM Implementation</text>
<image src="benchmark/elements-by-tagname.png" xlink:href=""/></svg>
<p>Numeric results (higher is better):</p>
<table class="normaltbl carteitem">
<thead><tr><th>Implementation</th><th>Score</th><th>Error</th><th>Unit</th></tr></thead><tbody>
<tr><td>Css4j DOM</td><td class="number">2.2340</td><td class="number">±0.0607</td><td>ops/s</td></tr>
<tr><td>Css4j-DOM4J</td><td class="number">461.7707</td><td class="number">±5.3620</td><td>ops/s</td></tr>
<tr><td>Css4j DOM (iterator)</td><td class="number">1,704.4536</td><td class="number">±208.2431</td><td>ops/s</td></tr>
<tr><td>JDK</td><td class="number">2,108.4757</td><td class="number">±8.5393</td><td>ops/s</td></tr>
</tbody></table>
<p><em>Note:</em> the iterator is documented as the recommended way to traverse the <a href="https://css4j.github.io/api/latest/io.sf.carte.css4j/io/sf/carte/doc/dom/ElementList.html"><code>ElementList</code></a> in css4j since version 3.2. Css4j versions prior to 3.2 perform much better in this benchmark,
but the implementation was switched to one that is more lightweight (and the iterator performance is good enough).</p>
</div>
<div class="tema" id="dom-change">
<h2>DOM modification: <code>appendChild()/removeChild()</code></h2>
<p>Modify the nodes of an XML document by appending elements with <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.xml/org/w3c/dom/Node.html#appendChild(org.w3c.dom.Node)"><code>appendChild()</code></a> and later removing them with
<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.xml/org/w3c/dom/Node.html#removeChild(org.w3c.dom.Node)"><code>removeChild()</code></a>.</p>
<svg version="1.1" baseprofile="full" xmlns="http://www.w3.org/2000/svg" width="700" height="500" viewbox="0 0 700 500" class="carteitem">
<title>DOM document modification</title><defs>
<clipPath id="dom-change-cut-scale-shadow">
  <rect width="623" height="15" x="71" y="41"/>
  <rect width="8" height="418" x="685" y="37"/>
</clipPath>
<linearGradient id="dom-change-background" gradientunits="objectBoundingBox" x1="1" x2="1" y1="0" y2="1">
<stop stop-color="#cde1ff" offset="0"/>
<stop stop-color="#ffffff" offset="0.9"/>
</linearGradient>
<linearGradient id="dom-change-reflection" gradientunits="objectBoundingBox" x1="0" x2="0" y1="0" y2="1">
<stop stop-color="#eeeeee" offset="0" stop-opacity="0.4"/>
<stop stop-color="#ffffff" offset="0.75" stop-opacity="0"/>
</linearGradient>
<filter id="dom-change-projection" filterunits="objectBoundingBox" x="0" y="-0.1" width="1.2" height="1.2">
<feGaussianBlur in="SourceAlpha" stddeviation="2" result="alpha_blur"/>
<feOffset in="alpha_blur" dx="3" dy="-3" result="offset_alpha_blur"/>
</filter>
</defs>
<style>text {
    font-family: "Open Sans", Verdana, sans-serif;
}
#dom-change-caption {
    font-size: 13pt;
    font-weight: 700;
}
#dom-change-subcaption {
    font-size: 9pt;
    font-weight: 600;
}
#dom-change-x-title,#dom-change-y-title {
    font-size: 10pt;
    font-weight: 700;
}
.dom-change-itemlabel {
    font-size: 9pt;
    font-weight: 400;
}
.dom-change-scaleItem {
    font-size: 9pt;
    font-weight: 300;
}
</style>
<rect width="100%" height="100%" fill="url('#dom-change-background')"/>
<rect width="610" height="400" x="75" y="55" stroke="#000000" fill="rgb(0,0,0)" fill-opacity="0" filter="url('#dom-change-projection')" clip-path="url('#dom-change-cut-scale-shadow')"/>
<rect id="dom-change-chartbox" width="610" height="400" x="75" y="55" stroke-width="1" stroke="#000000" fill="rgb(0,0,0)" fill-opacity="0"/>
<text id="dom-change-caption" x="355" y="22" text-anchor="middle" fill="black">DOM document modification</text>
<text id="dom-change-subcaption" x="355" y="40" text-anchor="middle" fill="black">appendChild()/removeChild()</text>
<rect width="138.0" height="238.4" x="80.8" y="216.6" stroke="#ffffff" stroke-opacity="0.4" filter="url('#dom-change-projection')"/>
<rect id="dom-change-markChangeDOM" width="138.0" height="238.4" x="80.8" y="216.6" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#61c061"/>
<rect width="138.0" height="238.4" x="80.8" y="216.6" fill="url('#dom-change-reflection')"/>
<line x1="154" x2="154" y1="212.2" y2="221.8" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="150.2" y="470" class="itemlabel" text-anchor="middle" fill="black">Css4j DOM</text>
<rect width="138.0" height="60" x="233.3" y="395" stroke="#ffffff" stroke-opacity="0.4" filter="url('#dom-change-projection')"/>
<rect id="dom-change-markChangeDOM4J" width="138.0" height="60" x="233.3" y="395" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#c04d4d"/>
<rect width="138.0" height="60" x="233.3" y="395" fill="url('#dom-change-reflection')"/>
<line x1="306.5" x2="306.5" y1="394.2" y2="395.8" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="302.7" y="470" class="itemlabel" text-anchor="middle" fill="black">Css4j-DOM4J</text>
<rect width="138.0" height="370.5" x="385.8" y="84.5" stroke="#ffffff" stroke-opacity="0.4" filter="url('#dom-change-projection')"/>
<rect id="dom-change-markChangeJdk" width="138.0" height="370.5" x="385.8" y="84.5" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#c0c061"/>
<rect width="138.0" height="370.5" x="385.8" y="84.5" fill="url('#dom-change-reflection')"/>
<line x1="459" x2="459" y1="67.4" y2="102.6" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="455.2" y="470" class="itemlabel" text-anchor="middle" fill="black">JDK</text>
<rect width="138.0" height="0.3" x="538.3" y="454.7" stroke="#ffffff" stroke-opacity="0.4" filter="url('#dom-change-projection')"/>
<rect id="dom-change-markChangeJsoup" width="138.0" height="0.3" x="538.3" y="454.7" stroke="black" stroke-width="0.4" stroke-opacity="0.3" fill="#b0d0d0"/>
<rect width="138.0" height="0.3" x="538.3" y="454.7" fill="url('#dom-change-reflection')"/>
<line x1="611.5" x2="611.5" y1="455" y2="455" stroke="#888888" stroke-opacity="0.867" stroke-width="5" stroke-linecap="round" stroke-dasharray="1" class="errorbar"/>
<text x="607.7" y="470" class="itemlabel" text-anchor="middle" fill="black">Jsoup</text>
<text x="74" y="59" class="scaleitem" text-anchor="end">790</text>
<text x="74" y="139" class="scaleitem" text-anchor="end">632</text>
<text x="74" y="219" class="scaleitem" text-anchor="end">474</text>
<text x="74" y="299" class="scaleitem" text-anchor="end">316</text>
<text x="74" y="379" class="scaleitem" text-anchor="end">158</text>
<text x="74" y="459" class="scaleitem" text-anchor="end">0</text>
<text id="dom-change-y-title" x="16" y="260" text-anchor="middle" fill="black" transform="rotate(270,16,260)">Throughput (ops/s)</text>
<text id="dom-change-x-title" x="350" y="496" text-anchor="middle" fill="black">DOM Implementation</text>
<image src="benchmark/dom-change.png" xlink:href=""/></svg>
<p>Numeric results (higher is better):</p>
<table class="normaltbl carteitem">
<thead><tr><th>Implementation</th><th>Score</th><th>Error</th><th>Unit</th></tr></thead><tbody>
<tr><td>Css4j DOM</td><td class="number">475.5690</td><td class="number">±9.6185</td><td>ops/s</td></tr>
<tr><td>Css4j-DOM4J</td><td class="number">119.6076</td><td class="number">±1.5586</td><td>ops/s</td></tr>
<tr><td>JDK</td><td class="number">739.1279</td><td class="number">±35.0935</td><td>ops/s</td></tr>
<tr><td>Jsoup</td><td class="number">0.5387</td><td class="number">±0.0113</td><td>ops/s</td></tr>
</tbody></table>
</div>
<div class="tema" id="analysis">
<h2>Analysis</h2>
<p>Building a document with DOM4J (both plain DOM4J and the CSS-enabled subclasses that CSS4J provide) is fast, but has an important scalability problem. It uses
a synchronized cache of <code>QName</code> objects, as shown by the benchmark profiler (e.g. <code>java -jar build/benchmarks.jar XMLBuildBenchmark -prof stack:lines=5;top=3;detailLine=true;period=1</code>):</p>
<pre class="code">Secondary result "io.sf.carte.mark.dom.XMLBuildBenchmark.markBuildDOM4J: stack":
Stack profiler:

....[Thread state distributions]....................................................................
 72,3%         BLOCKED
 27,6%         RUNNABLE

....[Thread state: BLOCKED].........................................................................
 72,3% 100,0% java.util.Collections$SynchronizedMap.get
              org.dom4j.tree.QNameCache.get
              org.dom4j.DocumentFactory.createQName
              org.dom4j.tree.NamespaceStack.createQName
              org.dom4j.tree.NamespaceStack.pushQName
</pre>
<p>So its usage is not recommended for multi-core systems.</p>
<p>Css4j's native DOM has more features than the other contenders (which implies a bit of overhead) but is still quite fast, although it is often slower than the JDK's DOM,
which is the fastest standard DOM. The latter looks like a good choice for applications that do not require handling styles (or you could use the read-only DOM wrapper with it, if that fits your needs).
Finally, DOM4J is lagging behind in performance for anything other than document build-up.</p>
<p>For users that do not need to handle CSS and do not mind dealing with a non-standard API, Jsoup excels at parsing and has good traversal speeds,
although is several orders of magnitude slower in the document modification benchmark.</p>
</div>
</div>
<div class="footnote">
</div>
</div>
</div>
</body></html>